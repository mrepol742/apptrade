/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BSqcwX9A.js","assets/Cn32OB1o.js","assets/Dph47E3T.js","assets/BODyf8bS.js","assets/uZNeay-J.js","assets/CFrBDmKk.js","assets/DEuonRil.js","assets/k-NSAY8B.js","assets/BS1w9-H_.js","assets/DKL8D26R.js","assets/CfN0c7gy.js","assets/DCKxNtYz.js","assets/DKQ8yKpg.js","assets/CRXeWkLv.js","assets/InIMjYBq.js","assets/BeLtu-UY.js","assets/BEIWLzPI.js","assets/w2AEeOS2.js","assets/Di1rf2ZC.js","assets/Dg4gVdE3.js","assets/CB2NxDsk.js","assets/uAQ2p3zS.js","assets/Df1MfkuZ.js","assets/BUTH-fPQ.js","assets/BPjVUy-D.js","assets/DqkGgfGl.js","assets/BXEMiIsG.js","assets/CM6OLASA.css","assets/8DNUdJ0c.js","assets/CIPVWkUN.js","assets/KuPr9E5P.js","assets/C111EtUu.css","assets/DysEhy43.js","assets/BY-SvsJE.js","assets/CSagmB9p.js","assets/C3jdTVJv.js"])))=>i.map(i=>d[i]);
import{r as e,R as s,j as t}from"./Cn32OB1o.js";import{a as r,u as a}from"./Di1rf2ZC.js";import{_ as n}from"./CB2NxDsk.js";import{u as o,R as i,a as l,N as c,b as d,c as m}from"./Df1MfkuZ.js";import{a as u,b as h,c as x,C as p,u as j,d as g,e as y,f,g as b,h as v,i as N,j as w,k as S,l as C,m as k,n as P,o as _,p as E,q as D,r as R,s as q,t as M,v as L,w as F,x as T,y as z,z as I,A,B as O,D as Q,E as $,F as H,G as W,H as V,I as U,J as G,K as J,L as X,M as B,N as K,O as Y,P as Z,Q as ee,R as se,S as te,T as re,U as ae,V as ne,W as oe,X as ie,Y as le,Z as ce,_ as de,$ as me,a0 as ue,a1 as he}from"./BODyf8bS.js";import{P as xe}from"./uZNeay-J.js";import{S as pe}from"./8DNUdJ0c.js";import{F as je,f as ge,a as ye,b as fe,c as be,d as ve,e as Ne,g as we,h as Se,i as Ce,j as ke}from"./DysEhy43.js";import{y as Pe}from"./InIMjYBq.js";import{H as _e}from"./CfN0c7gy.js";const Ee=e.lazy((()=>n((()=>import("./BSqcwX9A.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))),De=e.lazy((()=>n((()=>Promise.resolve().then((()=>es))),void 0))),Re=e.lazy((()=>n((()=>import("./CRXeWkLv.js")),__vite__mapDeps([13,1,2,10,4,11,12,14,15,3,5,6,7,8,9])))),qe=e.lazy((()=>n((()=>import("./BEIWLzPI.js")),__vite__mapDeps([16,1,2,10,4,11,12,3,5,6,7,8,9])))),Me=[{path:"/",exact:!0,name:"Home"},{path:"/dashboard",name:"Dashboard",element:Ee},{path:"/departments",name:"Departments",element:e.lazy((()=>n((()=>import("./w2AEeOS2.js")),__vite__mapDeps([17,1,2,10,4,11,12,13,14,15,3,5,6,7,8,9,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))))},{path:"/products",name:"Products",element:e.lazy((()=>n((()=>Promise.resolve().then((()=>rs))),void 0)))},{path:"/users",name:"Users",element:e.lazy((()=>n((()=>import("./BY-SvsJE.js")),__vite__mapDeps([33,1,2,10,4,11,12,16,3,5,6,7,8,9,18,19,20,21,14,15,22,23,24,25,26,27,28,29,30,31,32]))))},{path:"/sales",name:"Sales",element:e.lazy((()=>n((()=>import("./CSagmB9p.js")),__vite__mapDeps([34,1,2,10,4,11,12,3,5,6,7,8,9,18,19,20,21,14,15,22,23,24,25,26,27,28,29,30,31,32]))))},{path:"/new-product",name:"New Product",element:De},{path:"/new-department",name:"New Department",element:Re},{path:"/new-user",name:"New User",element:qe},{path:"/logout",name:"Logout",element:e.lazy((()=>n((()=>import("./C3jdTVJv.js")),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9]))))}],Le=s.memo((()=>{const s=o().pathname,r=(e=>{const s=[];return e.split("/").reduce(((e,t,r,a)=>{const n=`${e}/${t}`,o=((e,s)=>{const t=s.find((s=>s.path===e));return!!t&&t.name})(n,Me);return o&&s.push({pathname:n,name:o,active:r+1===a.length}),n})),s})(s);return t.jsxs(u,{className:"my-0",children:[t.jsx(h,{href:"/",children:"Home"}),r.map(((s,t)=>e.createElement(h,{...s.active?{active:!0}:{href:s.pathname},key:t},s.name)))]})})),Fe=s.memo((()=>t.jsx(x,{fluid:!0,className:"px-4",children:t.jsx(e.Suspense,{fallback:t.jsx(p,{color:"primary"}),children:t.jsxs(i,{children:[Me.map(((e,s)=>e.element&&t.jsx(l,{path:e.path,exact:e.exact,name:e.name,element:t.jsx(e.element,{})},s))),t.jsx(l,{path:"/",element:t.jsx(c,{to:"dashboard",replace:!0})})]})})}))),Te=()=>{const s=e.useRef(),{colorMode:n,setColorMode:o}=j("coreui-free-react-admin-template-theme"),i=r(),l=a((e=>e.sidebarShow));return e.useEffect((()=>{document.addEventListener("scroll",(()=>{s.current&&s.current.classList.toggle("shadow-sm",document.documentElement.scrollTop>0)}))}),[]),t.jsxs(g,{position:"sticky",className:"mb-4 p-0",ref:s,children:[t.jsxs(x,{className:"border-bottom px-4",fluid:!0,children:[t.jsx(y,{onClick:()=>i({type:"set",sidebarShow:!l}),style:{marginInlineStart:"-14px"},children:t.jsx(f,{icon:b,size:"lg"})}),t.jsx(v,{className:"ms-auto",children:t.jsx(N,{children:t.jsx(w,{href:"#",children:t.jsx(f,{icon:S,size:"lg"})})})}),t.jsxs(v,{children:[t.jsxs(C,{variant:"nav-item",placement:"bottom-end",children:[t.jsx(k,{caret:!1,children:"dark"===n?t.jsx(f,{icon:P,size:"lg"}):"auto"===n?t.jsx(f,{icon:_,size:"lg"}):t.jsx(f,{icon:E,size:"lg"})}),t.jsxs(D,{children:[t.jsxs(R,{active:"light"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>o("light"),children:[t.jsx(f,{className:"me-2",icon:E,size:"lg"})," Light"]}),t.jsxs(R,{active:"dark"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>o("dark"),children:[t.jsx(f,{className:"me-2",icon:P,size:"lg"})," Dark"]}),t.jsxs(R,{active:"auto"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>o("auto"),children:[t.jsx(f,{className:"me-2",icon:_,size:"lg"})," Auto"]})]})]}),t.jsx(N,{className:"d-block d-md-none",children:t.jsx(w,{href:"#",children:t.jsx(f,{icon:S,size:"lg"})})}),t.jsx(q,{className:"mx-2 d-none d-md-block",type:"search",placeholder:"Search","aria-label":"Search",size:"sm",style:{width:"300px"}})]})]}),t.jsx(x,{className:"px-4",fluid:!0,children:t.jsx(Le,{})})]})},ze=({items:e})=>{const s=(e,s,r,a=!1)=>t.jsxs(t.Fragment,{children:[s||a&&t.jsx("span",{className:"nav-icon",children:t.jsx("span",{className:"nav-icon-bullet"})}),e&&e,r&&t.jsx(L,{color:r.color,className:"ms-auto",size:"sm",children:r.text})]}),r=(e,r,a=!1)=>{const{component:n,name:o,badge:i,icon:l,...c}=e,m=n;return t.jsx(m,{as:"div",children:c.to||c.href?t.jsx(w,{...c.to&&{as:d},...c.href&&{target:"_blank",rel:"noopener noreferrer"},...c,children:s(o,l,i,a)}):s(o,l,i,a)},r)},a=(e,n)=>{const{component:o,name:i,icon:l,items:c,to:d,...m}=e,u=o;return t.jsx(u,{compact:!0,as:"div",toggler:s(i,l),...m,children:null==c?void 0:c.map(((e,s)=>e.items?a(e,s):r(e,s,!0)))},n)};return t.jsx(M,{as:pe,children:e&&e.map(((e,s)=>e.items?a(e,s):r(e,s)))})};ze.propTypes={items:xe.arrayOf(xe.any).isRequired};const Ie=[{component:N,name:"Dashboard",to:"/dashboard",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Users",to:"/users",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Departments",to:"/departments",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Products",to:"/products",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Sales",to:"/sales",icon:t.jsx(je,{icon:ge,className:"me-2"})}],Ae=[{component:N,name:"Management",to:"/management",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Sales history",to:"/sales-history",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Open Sales",to:"/open-sales",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Cash in/out",to:"/cash-in-out",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"Credit Payments",to:"/credit-payments",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"End of Day",to:"/end-of-day",icon:t.jsx(je,{icon:ge,className:"me-2"})},{component:N,name:"User info",to:"/user-info",icon:t.jsx(je,{icon:ge,className:"me-2"})}],Oe=s.memo((()=>{const e=m(),s=r(),n=a((e=>e.sidebarUnfoldable)),o=a((e=>e.sidebarShow)),i=a((e=>e.user));return t.jsxs(F,{className:"border-end",position:"fixed",unfoldable:n,visible:o,onVisibleChange:e=>{s({type:"set",sidebarShow:e})},children:[t.jsxs(T,{className:"border-bottom",children:[t.jsxs(z,{to:"/",children:[t.jsx(I,{src:"/images/careers_at_apptrade_cover.jpg",className:"sidebar-brand-full rounded",alt:"AppTrade Logo",width:220,height:80}),t.jsx(I,{src:"/favicon.png",className:"sidebar-brand-narrow",alt:"AppTrade Favicon",width:50,height:30})]}),t.jsx(A,{className:"d-lg-none",dark:!0,onClick:()=>s({type:"set",sidebarShow:!1})})]}),t.jsx(ze,{items:"super_admin"===i.role||"admin"===i.role?Ie:"cashier"===i.role?Ae:void 0}),t.jsxs(O,{className:"border-top d-none d-lg-flex",children:[t.jsx("span",{onClick:s=>e("/logout"),children:"Logout"}),t.jsx(Q,{onClick:()=>s({type:"set",sidebarUnfoldable:!n})})]})]})}));xe.string;const Qe=e=>{const{href:s,name:r,text:a,...n}=e,o=r?`https://coreui.io/react/docs/components/${r}`:s;return t.jsx("div",{className:"float-end",children:t.jsx($,{...n,href:o,rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:t.jsx("small",{className:"text-body-secondary",children:a||"docs"})})})};Qe.propTypes={href:xe.string,name:xe.string,text:xe.string},s.memo(Qe);const $e=e=>{const{children:s,href:r,tabContentClassName:a}=e,n=`https://coreui.io/react/docs/${r}`;return t.jsxs("div",{className:"example",children:[t.jsxs(H,{variant:"underline-border",children:[t.jsx(N,{children:t.jsxs(w,{href:"#",active:!0,children:[t.jsx(f,{icon:W,className:"me-2"}),"Preview"]})}),t.jsx(N,{children:t.jsxs(w,{href:n,target:"_blank",children:[t.jsx(f,{icon:V,className:"me-2"}),"Code"]})})]}),t.jsx(U,{className:`rounded-bottom ${a||""}`,children:t.jsx(G,{className:"p-3 preview",visible:!0,children:s})})]})};$e.propTypes={children:xe.node,href:xe.string,tabContentClassName:xe.string},s.memo($e);const He=()=>t.jsxs("div",{children:[t.jsx(Oe,{}),t.jsxs("div",{className:"wrapper d-flex flex-column min-vh-100",children:[t.jsx(Te,{}),t.jsx("div",{className:"body flex-grow-1",children:t.jsx(Fe,{})})]})]}),We=({data:e})=>{const{showDeleteModal:s,setShowDeleteModal:r,products:a,setProducts:n,selectedProduct:o,setSelectedProduct:i,deleteMode:l}=e;return t.jsx(t.Fragment,{children:t.jsxs(J,{visible:s,onClose:()=>r(!1),"aria-labelledby":"Confirm Delete?",children:[t.jsx(X,{children:t.jsx(B,{id:"LiveDemoExampleLabel",children:"Confirm Delete?"})}),t.jsxs(K,{children:["Woohoo, confirm to delete ",o.length," items?"]}),t.jsx(Y,{children:t.jsx(Z,{color:"primary",onClick:()=>{if(0===o.length)return alert("Select a product");n("void"===l?e=>e.filter((e=>!o.includes(e.id))):e=>e.map((e=>o.includes(e.id)?{...e,deleted:!0}:e))),i([]),r(!1)},children:"Save changes"})})]})})};We.propTypes={data:xe.shape({showDeleteModal:xe.bool.isRequired,setShowDeleteModal:xe.func.isRequired,products:xe.array.isRequired,setProducts:xe.func.isRequired,selectedProduct:xe.array.isRequired,setSelectedProduct:xe.func.isRequired,deleteMode:xe.string.isRequired}).isRequired};const Ve=({data:s})=>{var r;const{showQuantityModal:a,setShowQuantityModal:n,products:o,setProducts:i,selectedProduct:l,setSelectedProduct:c}=s,d=e.useRef(null),[m,u]=e.useState(null==(r=o.find((e=>l.includes(e.id))))?void 0:r.quantity),h=()=>{i((e=>e.map((e=>l.includes(e.id)?{...e,quantity:m}:e)))),c([]),n(!1)},x=e=>{"Enter"===e.key&&a&&h()};return e.useEffect((()=>(window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)})),[]),t.jsx(t.Fragment,{children:t.jsx(J,{visible:a,onClose:()=>{u(0),n(!1)},"aria-labelledby":"Quantity Input",children:t.jsxs(K,{children:[t.jsx(q,{type:"number",id:"quantity",placeholder:"Enter quantity",value:m,min:1,max:999,onChange:e=>u(e.target.value),ref:d}),t.jsxs("div",{className:"numpad",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginTop:"15px"},children:[[1,2,3,4,5,6,7,8,9].map(((e,s)=>t.jsx(Z,{color:"primary",onClick:()=>u((s=>(s||"")+e)),style:{height:"50px"},children:e},e))),t.jsx(Z,{color:"outline-danger",onClick:()=>u(""),style:{height:"50px"},children:"C"}),t.jsx(Z,{color:"outline-primary",onClick:()=>u((e=>parseInt(e+"0"))),style:{height:"50px"},children:"0"}),t.jsx(Z,{color:"outline-danger",onClick:()=>u((e=>e&&e.toString().slice(0,-1)||"")),style:{height:"50px"},children:t.jsx(je,{icon:ye})})]}),t.jsx("div",{className:"d-flex justify-content-end mt-3 gap-2",children:t.jsx(Z,{color:"primary",onClick:h,children:"Save changes"})})]})})})};Ve.propTypes={data:xe.shape({showQuantityModal:xe.bool.isRequired,setShowQuantityModal:xe.func.isRequired,products:xe.array.isRequired,setProducts:xe.func.isRequired,selectedProduct:xe.array.isRequired,setSelectedProduct:xe.func.isRequired}).isRequired};const Ue=({data:s})=>{var r;const{showDiscountModal:a,setShowDiscountModal:n,products:o,setProducts:i,selectedProduct:l,setSelectedProduct:c}=s,[d,m]=e.useState((null==(r=o.find((e=>l.includes(e.id))))?void 0:r.discount)||""),u=()=>d<0?Pe.error("Discount cannot be negative"):d>100?Pe.error("Discount cannot be more than 100%"):(l.length>0?i((e=>e.map((e=>l.includes(e.id)?{...e,discount:d}:e)))):i((e=>-1!==e.findIndex((e=>"discount"===e.id))?e.map((e=>"discount"===e.id?{...e,discount:Number(d),date:Date.now()}:e)):[...e,{id:"discount",date:Date.now(),discount:Number(d)}])),c([]),void n(!1)),h=e=>{"Enter"===e.key&&a&&u()};return e.useEffect((()=>(window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)})),[]),t.jsx(t.Fragment,{children:t.jsx(J,{visible:a,onClose:()=>{m(0),n(!1)},"aria-labelledby":"Discount Input",children:t.jsxs(K,{children:[t.jsx(q,{type:"number",id:"discount",placeholder:"Enter discount",value:d,onChange:e=>m(e.target.value)}),t.jsxs("div",{className:"numpad",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginTop:"15px"},children:[t.jsx(Z,{color:"primary",onClick:()=>m(20),style:{height:"50px"},children:"Senior"}),t.jsx(Z,{color:"primary",onClick:()=>m(20),style:{height:"50px"},children:"PWD"}),t.jsx(Z,{color:"primary",onClick:()=>m(30),style:{height:"50px"},children:"Employee"}),[1,2,3,4,5,6,7,8,9].map(((e,s)=>t.jsx(Z,{color:"outline-primary",onClick:()=>m((s=>parseInt(s+""+e))),style:{height:"50px"},children:e},e))),t.jsx(Z,{color:"outline-danger",onClick:()=>m(""),style:{height:"50px"},children:"C"}),t.jsx(Z,{color:"outline-primary",onClick:()=>m((e=>parseInt(e+"0"))),style:{height:"50px"},children:"0"}),t.jsx(Z,{color:"outline-danger",onClick:()=>m((e=>e&&e.toString().slice(0,-1)||"")),style:{height:"50px"},children:t.jsx(je,{icon:ye})})]}),t.jsx("div",{className:"d-flex justify-content-end mt-3 gap-2",children:t.jsx(Z,{color:"primary",onClick:u,children:"Save changes"})})]})})})};Ue.propTypes={data:xe.shape({showDiscountModal:xe.bool.isRequired,setShowDiscountModal:xe.func.isRequired,products:xe.array.isRequired,setProducts:xe.func.isRequired,selectedProduct:xe.array.isRequired,setSelectedProduct:xe.func.isRequired}).isRequired};const Ge=({data:s})=>{const{showPaymentModal:r,setShowPaymentModal:a,products:n,setProducts:o,selectedProduct:i,setSelectedProduct:l,total:c,paymentMethod:d,setPaymentMethod:m}=s,[u,h]=e.useState(n.amount||""),x=e=>{"Enter"===e.key&&r&&p()},p=async()=>0===n.length?Pe.error("Select a product"):u<0?Pe.error("Amount cannot be negative"):parseInt(u)<parseInt(c)?Pe.error("Amount is less than total"):parseInt(u)>Number.MAX_SAFE_INTEGER?Pe.error("Amount is greater than max safe integer"):void axios.post("/sales/checkout",{products:n,total:c,total_discount:0,total_taxes:0,total_payment:u,total_change:u-c,mode_of_payment:d,reference_number:"12"}).then((e=>{if(e.data.error)return Pe.error(e.data.error);if(200===e.status){const s=new WebSocket("ws://localhost:8080");s.onopen=()=>{console.log("Connected to print server"),s.send(JSON.stringify(e.data))},s.onmessage=e=>{console.log("Server says:",e.data);const t=JSON.parse(e.data);"success"!==t.status&&Pe.error("Failed to print receipt"),t.error&&console.error(t.error),s.close()},s.onerror=e=>{Pe.error("Error connecting to print server"),console.error("WebSocket error:",e)},o([]),l([]),a(!1),Pe.success("Checkout successful")}})).catch((e=>{console.error(e),Pe.error("Checkout failed")}));return e.useEffect((()=>(window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)})),[]),t.jsx(t.Fragment,{children:t.jsx(J,{alignment:"center",scrollable:!0,visible:r,onClose:()=>{h(""),a(!1)},"aria-labelledby":"Payment",children:t.jsxs(K,{children:[t.jsx("h5",{children:"Payment"}),t.jsxs("div",{className:"d-flex flex-row justify-content-between gap-2 mb-3",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("cash"===d?"bg-primary border-primary":"border-secondary"),onClick:()=>m("cash"),style:{cursor:"pointer"},children:"Cash"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("credit"===d?"bg-primary border-primary":"border-secondary"),onClick:()=>m("credit"),style:{cursor:"pointer"},children:"Credit"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("debit"===d?"bg-primary border-primary":"border-secondary"),onClick:()=>m("debit"),style:{cursor:"pointer"},children:"Debit"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("check"===d?"bg-primary border-primary":"border-secondary"),onClick:()=>m("check"),style:{cursor:"pointer"},children:"Check"})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("p",{children:"Total:"}),t.jsx("div",{className:"text-wrap text-break overflow-y",children:c.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("p",{className:"my-auto",children:"Paid:"}),t.jsx(q,{type:"number",value:u,onChange:e=>{let s=e.target.value;s.length>1&&s.startsWith("0")&&(s=s.replace(/^0+/,"")),(""===s||Number(s)<=Number.MAX_SAFE_INTEGER)&&h(s)},placeholder:"Enter amount",min:0,max:Number.MAX_SAFE_INTEGER,className:"w-50"})]}),t.jsx("hr",{}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("p",{className:"me-3",children:"Change:"}),t.jsx("div",{className:"text-wrap text-break overflow-y",children:(()=>{const e=parseFloat(u),s=parseFloat(c);return e>=s?t.jsx(t.Fragment,{children:(e-s).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}):"0.00"})()})]}),t.jsx("div",{className:"d-flex justify-content-end mt-3 gap-2",children:t.jsx(Z,{color:"primary",onClick:p,disabled:!u||parseInt(u)<parseInt(c)||parseInt(u)>Number.MAX_SAFE_INTEGER,children:"Print Receipt"})})]})})})};Ge.propTypes={data:xe.shape({showPaymentModal:xe.bool.isRequired,setShowPaymentModal:xe.func.isRequired,products:xe.array.isRequired,setProducts:xe.func.isRequired,selectedProduct:xe.array.isRequired,setSelectedProduct:xe.func.isRequired,total:xe.number.isRequired,paymentMethod:xe.string.isRequired,setPaymentMethod:xe.func.isRequired}).isRequired};const Je=({data:s})=>{const{showSearchModal:r,setShowSearchModal:a,products:n,setProducts:o,searchQuery:i}=s,[l,c]=e.useState(i),[d,m]=e.useState([]),[u,h]=e.useState(1),[x,p]=e.useState(0);e.useEffect((()=>{j(i)}),[]);const j=e=>{axios.post("/products/search",{query:e}).then((e=>e.data.error?Pe.error(e.data.error):0===e.data.data.length?Pe.error("No products found"):(m(e.data.data),h(e.data.currentPage),void p(e.data.totalPages)))).catch((e=>{console.error("Error fetching products:",e)}))};return t.jsx(t.Fragment,{children:t.jsx(J,{alignment:"center",scrollable:!0,visible:r,onClose:()=>{c(""),m([]),h(1),p(0),a(!1)},"aria-labelledby":"Search",children:t.jsxs(K,{children:[t.jsx(q,{type:"text",placeholder:"Search...",value:l,onChange:e=>{c(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&j(e.target.value)}}),t.jsx("h5",{children:"Search results:"}),t.jsx("ul",{children:d.map((e=>t.jsxs("li",{children:[e.name," - ",e.cost_price]},e.id)))})]})})})};Je.propTypes={data:xe.shape({showSearchModal:xe.bool.isRequired,setShowSearchModal:xe.func.isRequired,products:xe.array.isRequired,setProducts:xe.func.isRequired,searchQuery:xe.string.isRequired}).isRequired};const Xe=({data:s})=>{const{handleDelete:r,handleQuantity:a,handleNewSale:n,handleDiscount:o,handleSalesLock:i,handlePayment:l,salesLock:c,selectedProduct:d,showMenu:m,setShowMenu:u,discount:h,paymentMethod:x,setPaymentMethod:p}=s,[g,y]=e.useState(!1),[b,v]=e.useState(new Date),{colorMode:N,setColorMode:w}=j("coreui-free-react-admin-template-theme");e.useEffect((()=>{const e=setInterval((()=>{v(new Date)}),1e3);return()=>clearInterval(e)}),[]),e.useEffect((()=>{const e=e=>{"F11"===e.key&&(e.preventDefault(),S())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[g]);const S=()=>{if(!g)return document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen(),void y(!0);document.exitFullscreen&&document.exitFullscreen(),y(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-grow-1 text-uppercase","data-aos":"fade-in",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2 p-2 text-center",children:[b.toLocaleString("en-US",{month:"long",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),t.jsxs("div",{children:[t.jsxs(C,{children:[t.jsx(k,{caret:!1,children:"dark"===N?t.jsx(f,{icon:P,size:"lg"}):"auto"===N?t.jsx(f,{icon:_,size:"lg"}):t.jsx(f,{icon:E,size:"lg"})}),t.jsxs(D,{children:[t.jsxs(R,{active:"light"===N,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>w("light"),children:[t.jsx(f,{className:"me-2",icon:E,size:"lg"})," Light"]}),t.jsxs(R,{active:"dark"===N,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>w("dark"),children:[t.jsx(f,{className:"me-2",icon:P,size:"lg"})," Dark"]}),t.jsxs(R,{active:"auto"===N,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>w("auto"),children:[t.jsx(f,{className:"me-2",icon:_,size:"lg"})," Auto"]})]})]}),t.jsx(je,{className:"ms-2",icon:g?fe:be,onClick:S,style:{cursor:"pointer"},title:g?"Exit Full Screen":"Full Screen"})]})]}),t.jsxs("div",{className:" d-flex justify-content-between align-items-center text-center",children:[t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-2 "+(d.length>0?"bg-danger border-danger":"border-secondary"),onClick:e=>r("del"),style:{flex:1},children:[t.jsx(je,{icon:ve,className:"mb-2",style:{width:"30px",height:"50px"}}),"Cancel"]}),t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:a,style:{flex:1},children:[t.jsx(je,{icon:Ne,className:"mb-2",style:{width:"30px",height:"50px"}}),"Quantity"]}),t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:n,style:{flex:1},children:[t.jsx(je,{icon:we,className:"mb-2",style:{width:"30px",height:"50px"}}),"New Sale"]})]}),t.jsx("small",{className:"ms-1",children:"Payments"}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+("cash"===x?"bg-primary border-primary":"border-secondary"),onClick:()=>p("cash"),style:{flex:1},children:"Cash"}),t.jsx("div",{className:`rounded py-3 m-1 d-flex flex-column align-items-center border border-2 ${"credit"===x?"bg-primary border-primary":"border-secondary"}  bg-secondary`,style:{flex:1},children:"Credit Card"}),t.jsx("div",{className:`rounded py-3 m-1 d-flex flex-column align-items-center border border-2 ${"debit"===x?"bg-primary border-primary":"border-secondary"}  bg-secondary`,style:{flex:1},children:"Debit Card"})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 text-center",children:[t.jsx("div",{className:`rounded py-3 m-1 d-flex flex-column align-items-center border border-2 ${"check"===x?"bg-primary border-primary":"border-secondary"}  bg-secondary`,style:{flex:1},children:"Check"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary bg-secondary",style:{flex:1},children:"Gift Card"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary bg-secondary",style:{flex:1},children:"Voucher"})]})]}),t.jsxs("div",{className:"mt-auto text-uppercase","data-aos":"fade-in",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+(h>0?"bg-primary border-primary":"border-secondary"),onClick:o,style:{flex:1},children:"Discount"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary bg-secondary",style:{flex:1},children:"Refund"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-success bg-success",onClick:l,style:{flex:1},children:"Payment"})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+(c?"bg-danger border-danger":"border-secondary"),onClick:i,style:{flex:1},children:"Lock"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary bg-secondary",style:{flex:1},children:"Transfer"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-danger bg-danger",onClick:e=>r("void"),style:{flex:1},children:"Void"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:()=>u(!m),style:{flex:1},children:"Menu"})]})]})]})};Xe.propTypes={data:xe.shape({handleDelete:xe.func.isRequired,handleQuantity:xe.func.isRequired,handleNewSale:xe.func.isRequired,handleDiscount:xe.func.isRequired,handleSalesLock:xe.func.isRequired,handlePayment:xe.func.isRequired,salesLock:xe.bool.isRequired,selectedProduct:xe.array.isRequired,showMenu:xe.bool.isRequired,setShowMenu:xe.func.isRequired,discount:xe.string.isRequired,paymentMethod:xe.string.isRequired,setPaymentMethod:xe.func.isRequired}).isRequired};const Be=({data:s})=>{const{showMenu:r,setShowMenu:a}=s,n=[{name:"Management",path:"/management",icon:we},{name:"Sales History",path:"/sales-history",icon:we},{name:"Open Sales",path:"/open-sales",icon:we},{name:"Cash In/Out",path:"/cash-in-out",icon:we},{name:"Credit Payments",path:"/credit-payments",icon:we},{name:"End of Day",path:"/end-of-day",icon:we},{name:"User Info",path:"/user-info",icon:we}];return e.useEffect((()=>{const e=e=>{console.log(e.key),"Escape"===e.key&&a(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]),t.jsxs("div",{className:"m-2","data-aos":"fade-in",children:[t.jsx("div",{className:"d-flex justify-content-between align-items-center",style:{cursor:"pointer"},onClick:()=>a(!1),children:t.jsxs("div",{className:"text-center py-3",onClick:()=>a(!1),children:[t.jsx(je,{icon:Se,className:"my-auto me-3"}),t.jsx("span",{className:"text-uppercase",children:"Menu"})]})}),t.jsx(ee,{children:n.map(((e,s)=>t.jsx(N,{children:t.jsx(w,{children:t.jsxs("span",{className:"border p-3 rounded",style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(je,{icon:e.icon,className:"my-auto"}),t.jsx("span",{children:e.name})]})})},s)))})]})};Be.propTypes={data:xe.shape({showMenu:xe.bool.isRequired,setShowMenu:xe.func.isRequired}).isRequired};const Ke=()=>{const[s,r]=e.useState([]),[a,n]=e.useState([]),[o,i]=e.useState(null),[l,c]=e.useState(""),[d,m]=e.useState(!1),[u,h]=e.useState(!1),[x,j]=e.useState(!1),[g,y]=e.useState(!1),[f,b]=e.useState(!1),[v,N]=e.useState(!1),[w,S]=e.useState("cash"),[C,k]=e.useState(!1),[P,_]=e.useState(!1),[E,D]=e.useState(null),R=s.filter((e=>"discount"!==e.id&&!e.deleted)).reduce(((e,s)=>e+s.sale_price*(1-s.discount/100)*s.quantity),0),M=s.filter((e=>"discount"!==e.id&&!e.deleted)).reduce(((e,s)=>{const t=s.sale_price*(1-s.discount/100);return e+(s.taxes?t*s.taxes/100:0)*s.quantity}),0).toFixed(2),L=s.filter((e=>"discount"===e.id)).reduce(((e,s)=>e+(s.discount||0)),0),F=(parseFloat(R)+parseFloat(M))*(1-parseFloat(L)/100),T=(e,s,t=0)=>e*(1-t/100)*s,z=(e,s=0)=>e*(1-s/100),I=e=>{"F2"===e.key?(e.preventDefault(),O()):"F4"===e.key?(e.preventDefault(),A()):"F10"===e.key?(e.preventDefault(),$()):"Delete"===e.key&&(e.preventDefault(),Q())};e.useEffect((()=>{const e=e=>{if(P)return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I),window.removeEventListener("beforeunload",e)}}),[P]),e.useEffect((()=>{(async()=>{axios.get("/sales-lock").then((e=>{if(e.data.error)return Pe.error(e.data.error);e.data.length>0?(i(!0),r(JSON.parse(e.data))):i(!1)})).catch((e=>{console.error("Error fetching sales lock:",e)}))})()}),[]);const A=()=>o?Pe.error("Sales locked"):0===a.length?Pe.error("Select a product"):void h(!0),O=()=>{if(o)return Pe.error("Sales locked");j(!0)},Q=e=>o?Pe.error("Sales locked"):0===a.length?Pe.error("Select a product"):(m(!0),void D(e)),$=()=>o?Pe.error("Sales locked"):0===s.length?Pe.error("No products in cart"):void N(!0);return null===o?t.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:t.jsx(p,{color:"primary"})}):t.jsxs("div",{className:"d-flex flex-column",style:{height:"100vh",width:"99.3%"},children:[t.jsx(We,{data:{showDeleteModal:d,setShowDeleteModal:m,products:s,setProducts:r,selectedProduct:a,setSelectedProduct:n,deleteMode:E}}),t.jsx(Ve,{data:{showQuantityModal:u,setShowQuantityModal:h,products:s,setProducts:r,selectedProduct:a,setSelectedProduct:n}}),t.jsx(Ue,{data:{showDiscountModal:x,setShowDiscountModal:j,products:s,setProducts:r,selectedProduct:a,setSelectedProduct:n}}),t.jsx(Ge,{data:{showPaymentModal:v,setShowPaymentModal:N,products:s,setProducts:r,selectedProduct:a,setSelectedProduct:n,total:F,paymentMethod:w,setPaymentMethod:S}}),t.jsx(Je,{data:{showSearchModal:f,setShowSearchModal:b,products:s,setProducts:r,searchQuery:l}}),t.jsxs(se,{className:"flex-grow-1 overflow-hidden",children:[t.jsxs(te,{className:"d-flex flex-column h-100",children:[t.jsx(q,{className:"rounded-0 py-3 border-0 border-bottom",type:"search",placeholder:"Search product by name or barcode","aria-label":"Search",value:l,onChange:e=>{c(e.target.value)},autoFocus:!0,onFocus:e=>{e.target.select(),e.target.setSelectionRange(0,e.target.value.length)},onKeyDown:e=>{"Enter"===e.key&&((e=>{if(o)return Pe.error("Sales locked");const t=e.target.value;if(t.includes(" "))return c(t),b(!0);if(s.find((e=>e.barcode&&e.barcode.toLowerCase()===t)))return r((e=>e.map((e=>e.barcode&&e.barcode.toLowerCase()===t?{...e,quantity:e.quantity+1,discount:0}:e)))),void _(!0);axios.get(`/products/${t}`).then((e=>{if(e.data.error)return Pe.error(e.data.error);if(!e.data.id)return Pe.error("Product not found");const s=e.data;r((e=>e.find((e=>e.id===s.id))?e.map((e=>e.id===s.id?{...e,quantity:e.quantity+1,discount:0}:e)):[...e,{...s,quantity:1,discount:0}])),_(!0)})).catch((e=>{console.error("Error searching products:",e)}))})(e),e.target.value.includes(" ")||(e.target.value="",c("")))}}),t.jsx("div",{className:"flex-grow-1 overflow-auto",style:{minHeight:0},children:t.jsxs(re,{hover:!0,responsive:!0,children:[t.jsx(ae,{children:t.jsxs(ne,{children:[t.jsx(oe,{scope:"col",className:"text-uppercase",style:{minWidth:180},children:"Product"}),t.jsx(oe,{scope:"col",className:"text-uppercase text-center",style:{width:80,maxWidth:100},children:"Quantity"}),t.jsx(oe,{scope:"col",className:"text-uppercase text-end",style:{width:100,maxWidth:120},children:"Price"}),t.jsx(oe,{scope:"col",className:"text-uppercase text-end",style:{width:110,maxWidth:130},children:"Total"})]})}),0===s.length?t.jsx("div",{className:"position-absolute top-50 start-50 translate-middle text-center",children:t.jsx("h3",{className:"text-muted mb-0",children:"No items in cart"})}):t.jsx(ie,{children:s.map(((e,s)=>{const r=e.taxes?e.sale_price+e.sale_price*e.taxes/100:e.sale_price;if("discount"!==e.id)return t.jsxs(ne,{active:a.includes(e.id),onClick:()=>(e=>{if(a.includes(e))return n(a.filter((s=>s!==e)));n([...a,e])})(e.id),children:[t.jsxs(le,{style:{minWidth:180},children:[t.jsx("span",{className:`${e.deleted&&"text-danger"}`,children:e.name}),t.jsx("span",{className:`${e.deleted&&"text-danger"} d-block`,style:{fontSize:"0.7em"},children:e.barcode})]}),t.jsx(le,{className:`${e.deleted&&"text-danger"} text-end`,style:{width:80,maxWidth:100},children:e.quantity}),t.jsxs(le,{className:`${e.deleted&&"text-danger"} text-end`,style:{width:100,maxWidth:120},children:[e.discount>0&&t.jsx(je,{icon:Ce,className:(e.deleted?"text-danger":"text-success")+" me-1",style:{width:"12px",height:"12px"}}),z(r,e.discount).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsx(le,{className:`${e.deleted&&"text-danger"} text-end`,style:{width:110,maxWidth:130},children:T(r,e.quantity,e.discount).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})]},s)}))})]})}),t.jsxs("div",{className:"bg-body-secondary p-3 m-3 rounded mt-auto",children:[t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Subtotal:"}),t.jsx("span",{children:R.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),L>0&&t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Discount:"}),t.jsxs("span",{children:[L,"%"]})]}),t.jsxs("div",{className:"d-flex justify-content-between  border-bottom border-secondary pb-2",children:[t.jsx("span",{children:"Tax:"}),t.jsx("span",{children:M.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})]}),t.jsxs("div",{className:"d-flex justify-content-between pt-2",children:[t.jsx("strong",{children:"Total:"}),t.jsx("strong",{children:F.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})})]})]})]}),t.jsx(te,{lg:5,xl:3,className:"d-flex flex-column border-start border-2 border-secondary h-100",children:C?t.jsx(Be,{data:{showMenu:C,setShowMenu:k}}):t.jsx(Xe,{data:{handleDelete:Q,handleQuantity:A,handleNewSale:()=>{if(0===s.length)return Pe.error("No products in cart");r([]),n([])},handleDiscount:O,handleSalesLock:async()=>{if(0===s.length)return Pe.error("No products in cart");axios.post("/sales-lock",{products:o?"[]":JSON.stringify(s),mode:!o}).then((e=>{if(e.data.error)return Pe.error(e.data.error);Pe.success(o?"Sales unlocked successfully":"Sales locked successfully"),i(!o)})).catch((e=>{console.error("Error fetching sales lock:",e)}))},handlePayment:$,salesLock:o,selectedProduct:a,showMenu:C,setShowMenu:k,discount:L,paymentMethod:w,setPaymentMethod:S}})})]})]})},Ye=()=>t.jsx(Ke,{}),Ze=()=>{const[s,r]=e.useState([]),[a,n]=e.useState([]),[o,i]=e.useState({name:"",code:"",barcode:"",unit_measurement:"",group:"",active:!0,default_quantity:!0,age_restriction:0,description:"",taxes:0,cost_price:0,markup:0,sale_price:0,color:"",image:null}),l=e=>{const{id:s,value:t}=e.target;i((e=>({...e,[s]:t})))},c=e=>{const{id:s,checked:t}=e.target;i((e=>({...e,[s]:t})))},d=e=>{const{id:s,value:t}=e.target;i((e=>({...e,[s]:t})))};return e.useEffect((()=>{(async()=>{const[e,s]=await Promise.all([axios.get("/departments"),axios.get("/groups")]);r(e.data),n(s.data)})()}),[]),t.jsxs(ce,{onSubmit:e=>{e.preventDefault(),axios.post("/products",o).then((e=>{if(e.data.error)return Pe.error(e.data.error);Pe.success("Product created successfully"),i({name:"",code:"",barcode:"",unit_measurement:"",group:"",active:!0,default_quantity:!0,age_restriction:0,description:"",taxes:0,cost_price:0,markup:0,sale_price:0,color:"",image:null})})).catch((e=>{console.error("Error adding product:",e)}))},className:"border rounded-3 p-4 mx-3",children:[t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("h3",{className:"mb-3",children:"New Product"}),t.jsxs("div",{children:[t.jsx(Z,{color:"secondary",className:"me-2",size:"sm",children:"Cancel"}),t.jsx(Z,{color:"primary",size:"sm",type:"submit",children:"Save"})]})]}),t.jsx("h5",{children:"Details"}),t.jsxs(se,{children:[t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"text",id:"name",floatingClassName:"mb-3",floatingLabel:"Name",onChange:l,placeholder:"",required:!0})}),t.jsx(te,{xs:12,md:6,children:t.jsx(de,{id:"department_id",floatingClassName:"mb-3",floatingLabel:"Department",onChange:d,options:[{label:"Select a department",value:""},...s.map((e=>({label:e.name,value:e.id})))]})})]}),t.jsxs(se,{children:[t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"text",id:"code",floatingClassName:"mb-3",floatingLabel:"Code",onChange:l,placeholder:""})}),t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"text",id:"barcode",floatingClassName:"mb-3",floatingLabel:"Barcode",onChange:l,placeholder:""})})]}),t.jsxs(se,{children:[t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"text",id:"unit_measurement",floatingClassName:"mb-3",floatingLabel:"Unit of Measurement",onChange:l,placeholder:""})}),t.jsx(te,{xs:12,md:6,children:t.jsx(de,{id:"group_id",floatingClassName:"mb-3",floatingLabel:"Group",onChange:d,options:[{label:"Select a group",value:""},...a.map((e=>({label:e.name,value:e.id})))]})})]}),t.jsx(me,{onChange:c,label:"Active",id:"is_active",defaultChecked:!0}),t.jsx(me,{onChange:c,label:"Default Quantity",id:"default_quantity",defaultChecked:!0}),t.jsx(q,{type:"number",id:"age_restriction",floatingClassName:"mb-3",floatingLabel:"Age Restriction",onChange:l,placeholder:""}),t.jsx(q,{type:"text",id:"description",floatingClassName:"mb-3",floatingLabel:"Description",onChange:l,placeholder:""}),t.jsx("h5",{children:"Price"}),t.jsxs(se,{children:[t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"number",id:"taxes",floatingClassName:"mb-3",floatingLabel:"Taxes %",onChange:l,placeholder:""})}),t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"number",id:"cost_price",floatingClassName:"mb-3",floatingLabel:"Cost",onChange:l,placeholder:""})})]}),t.jsxs(se,{children:[t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"number",id:"markup",floatingClassName:"mb-3",floatingLabel:"Markup",onChange:l,placeholder:""})}),t.jsx(te,{xs:12,md:6,children:t.jsx(q,{type:"number",id:"sale_price",floatingClassName:"mb-3",floatingLabel:"Sale Price",onChange:l,placeholder:""})})]}),t.jsx("h5",{children:"Image & Color"}),t.jsx(q,{type:"text",id:"color",floatingClassName:"mb-3",floatingLabel:"Color",onChange:l,placeholder:""}),t.jsxs("div",{className:"mb-3",children:[t.jsx(q,{type:"file",id:"image",onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onloadend=()=>{i((s=>({...s,image:e.result})))},e.readAsDataURL(s)}},accept:"image/*",className:"mb-2"}),t.jsx(Z,{color:"secondary",className:"me-2",size:"sm",onClick:()=>{i((e=>({...e,image:null})))},children:"Clear"})]}),o.image&&t.jsx(I,{src:o.image,className:"img-fluid mb-3",alt:"Selected image",style:{maxWidth:"150px",maxHeight:"150px"}})]})},es=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"})),ss=({currentPage:e,setCurrentPage:s,totalPages:r,setTotalPages:a})=>t.jsxs(ue,{"aria-label":"Page navigation",children:[t.jsx(he,{onClick:()=>s((e=>Math.max(e-1,1))),disabled:1===e,"aria-label":"Previous",children:t.jsx(je,{"aria-hidden":!0,icon:Se})}),(()=>{const a=[],n=Math.max(1,e-2),o=Math.min(r,n+5-1);n>1&&(a.push(t.jsx(he,{onClick:()=>s(1),children:"1"},1)),n>2&&a.push(t.jsx(he,{disabled:!0,children:"â¦"},"ellipsis-start")));for(let r=n;r<=o;r++)a.push(t.jsx(he,{onClick:()=>s(r),active:e===r,children:r},r));return o<r&&(o<r-1&&a.push(t.jsx(he,{disabled:!0,children:"â¦"},"ellipsis-end")),a.push(t.jsx(he,{onClick:()=>s(r),children:r},r))),a})(),t.jsx(he,{onClick:()=>s((e=>Math.min(e+1,r))),disabled:e===r,"aria-label":"Next",children:t.jsx(je,{"aria-hidden":!0,icon:ke})})]});ss.propTypes={currentPage:xe.number.isRequired,setCurrentPage:xe.func.isRequired,totalPages:xe.number.isRequired,setTotalPages:xe.func.isRequired};const ts=()=>{const s=m(),[r,a]=e.useState([]),[n,o]=e.useState(1),[i,l]=e.useState(0);e.useEffect((()=>{c(n)}),[n]);const c=async e=>{try{const s=await axios.get("/products",{params:{page:e}});if(s.data.error)return Pe.error(s.data.error);a(s.data.data),l(s.data.totalPages),o(s.data.currentPage)}catch(s){console.error("Error fetching Products:",s)}};return t.jsxs("div",{children:[t.jsx(_e,{children:t.jsx("title",{children:"Products - Apptrade"})}),t.jsxs(se,{children:[t.jsxs(te,{children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[t.jsx("h1",{children:"Products"}),t.jsxs("div",{children:[t.jsx(Z,{size:"sm",className:"me-1",color:"primary",onClick:()=>alert("Import Products"),children:"Import"}),t.jsx(Z,{size:"sm",className:"me-1",color:"primary",onClick:()=>(async()=>{window.open("http://localhost:8000/api/export/products","_blank")})(),children:"Export"}),t.jsx(Z,{className:"d-inline d-xl-none",size:"sm",color:"primary",onClick:()=>s("/new-product"),children:"Add"})]})]}),0===r.length?t.jsx("div",{className:"d-flex justify-content-center align-items-center",children:t.jsx("h3",{children:"Loading products..."})}):t.jsxs(t.Fragment,{children:[t.jsxs(re,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[t.jsx(ae,{children:t.jsxs(ne,{children:[t.jsx(oe,{scope:"col",children:"Name"}),t.jsx(oe,{scope:"col",children:"Code"}),t.jsx(oe,{scope:"col",children:"Barcode"}),t.jsx(oe,{scope:"col",children:"Cost Price"}),t.jsx(oe,{scope:"col",children:"Sale Price"}),t.jsx(oe,{scope:"col",children:"Stock"}),t.jsx(oe,{scope:"col",children:"Department"}),t.jsx(oe,{scope:"col",children:"Group"}),t.jsx(oe,{scope:"col"})]})}),t.jsx(ie,{children:r.map(((e,s)=>t.jsxs(ne,{children:[t.jsx(le,{children:e.name}),t.jsx(le,{children:e.code}),t.jsx(le,{children:e.barcode}),t.jsx(le,{children:e.cost_price}),t.jsx(le,{children:e.sale_price}),t.jsx(le,{children:e.is_active?"Yes":"No"}),t.jsx(le,{children:e.department.name}),t.jsx(le,{children:e.group.name}),t.jsx(le,{children:t.jsxs("div",{className:"d-flex",children:[t.jsx(Z,{size:"sm",color:"primary",onClick:()=>alert(`Edit ${e.name}`),children:"Edit"}),t.jsx(Z,{size:"sm",color:"danger",onClick:()=>alert(`Delete ${e.name}`),className:"ms-2",children:"Delete"})]})})]},e.id)))})]}),t.jsx(ss,{currentPage:n,setCurrentPage:o,totalPages:i,setTotalPages:l})]})]}),t.jsx(te,{className:"d-none d-xl-block",children:t.jsx(Ze,{})})]})]})},rs=Object.freeze(Object.defineProperty({__proto__:null,default:ts},Symbol.toStringTag,{value:"Module"})),as=()=>{const[s,n]=e.useState("loading"),o=r(),i=a((e=>e.user)),l=m(),c=cookies.get("session_id");return e.useEffect((()=>{(()=>{if(i||c)return(async()=>{try{const e=await axios.post("/auth/verify-session",{session_id:c});o({type:"SET_USER",payload:e.data.user}),n("authenticated")}catch(e){cookies.remove("session_id"),l("/login")}})();l("/login")})()}),[l,o]),"loading"===s?t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:t.jsx("div",{className:"spinner-border",color:"primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):["super_admin","admin"].includes(i.role)?t.jsx(He,{}):"cashier"===i.role?t.jsx(Ye,{}):"production"===i.role?t.jsx(ts,{}):t.jsx(t.Fragment,{children:"Hello world"})},ns=Object.freeze(Object.defineProperty({__proto__:null,default:()=>t.jsx(as,{})},Symbol.toStringTag,{value:"Module"}));export{ss as A,ns as D};
