/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BzKAY5Wf.js","assets/BKBoo3Tm.js","assets/9B36_FC7.js","assets/CDvYKuT6.js","assets/ClQOd68B.js","assets/CFrBDmKk.js","assets/CGQw0KJ2.js","assets/k-NSAY8B.js","assets/BS1w9-H_.js","assets/DKL8D26R.js","assets/BDQsf9cj.js","assets/DKE3ELOG.js","assets/KCB0DJBS.js","assets/CPslJtzj.js","assets/Cy9oS-86.js","assets/C_KCb21E.js","assets/BxSAFr0k.js","assets/3MasRu-6.js","assets/BrRZpJ6z.js","assets/CnNhhQpT.js","assets/Bz8kMZeZ.js","assets/DAcSpKKR.js"])))=>i.map(i=>d[i]);
import{r as e,R as s,j as t}from"./BKBoo3Tm.js";import{a as r,u as a}from"./DulU42wa.js";import{_ as n}from"./DuizkVuv.js";import{u as l,R as o,a as i,N as c,b as d,c as m}from"./CnNhhQpT.js";import{a as x,b as h,c as u,C as p,u as j,d as f,e as y,f as b,g,h as v,i as N,j as w,k as _,l as C,m as k,n as S,o as E,p as P,q as D,r as R,s as T,t as q,v as L,w as z,x as V,y as I,z as M,A as F,B as A,D as O,E as Q,F as U,G as $,H as G,I as H,J as B,K,L as W,M as J,N as X,O as Y,P as Z,Q as ee,R as se,S as te,T as re,U as ae,V as ne,W as le,X as oe}from"./CDvYKuT6.js";import{P as ie}from"./ClQOd68B.js";import{S as ce}from"./BZotIl63.js";import{F as de,f as me,a as xe,b as he,c as ue}from"./BiJqrTLX.js";import{y as pe}from"./ByyKrB4k.js";import"./9B36_FC7.js";import"./BL3MksUi.js";import"./CGQw0KJ2.js";import"./k-NSAY8B.js";import"./CVKWc1jX.js";import"./BPjVUy-D.js";import"./DqkGgfGl.js";import"./BXEMiIsG.js";import"./BeLtu-UY.js";import"./CFrBDmKk.js";import"./BS1w9-H_.js";import"./DKL8D26R.js";import"./BWJu9-zt.js";import"./__7pD5m7.js";const je=e.lazy((()=>n((()=>import("./BzKAY5Wf.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))),fe=e.lazy((()=>n((()=>import("./CPslJtzj.js")),__vite__mapDeps([13,1,2,10,4,11,12,3,5,6,7,8,9])))),ye=e.lazy((()=>n((()=>import("./Cy9oS-86.js")),__vite__mapDeps([14,1,2,10,4,11,12,3,5,6,7,8,9])))),be=e.lazy((()=>n((()=>import("./C_KCb21E.js")),__vite__mapDeps([15,1,2,10,4,11,12,3,5,6,7,8,9])))),ge=[{path:"/",exact:!0,name:"Home"},{path:"/dashboard",name:"Dashboard",element:je},{path:"/reports",name:"Reports",element:e.lazy((()=>n((()=>import("./BxSAFr0k.js")),__vite__mapDeps([16,1,2,10,4,11,12]))))},{path:"/departments",name:"Departments",element:e.lazy((()=>n((()=>import("./3MasRu-6.js")),__vite__mapDeps([17,1,2,10,4,11,12,14,3,5,6,7,8,9]))))},{path:"/products",name:"Products",element:e.lazy((()=>n((()=>import("./BrRZpJ6z.js")),__vite__mapDeps([18,1,2,10,4,11,12,13,3,5,6,7,8,9,19]))))},{path:"/users",name:"Users",element:e.lazy((()=>n((()=>import("./Bz8kMZeZ.js")),__vite__mapDeps([20,1,2,10,4,11,12,15,3,5,6,7,8,9]))))},{path:"/new-product",name:"New Product",element:fe},{path:"/new-department",name:"New Department",element:ye},{path:"/new-user",name:"New User",element:be},{path:"/logout",name:"Logout",element:e.lazy((()=>n((()=>import("./DAcSpKKR.js")),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9]))))}],ve=s.memo((()=>{const s=l().pathname,r=(e=>{const s=[];return e.split("/").reduce(((e,t,r,a)=>{const n=`${e}/${t}`,l=((e,s)=>{const t=s.find((s=>s.path===e));return!!t&&t.name})(n,ge);return l&&s.push({pathname:n,name:l,active:r+1===a.length}),n})),s})(s);return t.jsxs(x,{className:"my-0",children:[t.jsx(h,{href:"/",children:"Home"}),r.map(((s,t)=>e.createElement(h,{...s.active?{active:!0}:{href:s.pathname},key:t},s.name)))]})})),Ne=s.memo((()=>t.jsx(u,{fluid:!0,className:"px-4",children:t.jsx(e.Suspense,{fallback:t.jsx(p,{color:"primary"}),children:t.jsxs(o,{children:[ge.map(((e,s)=>e.element&&t.jsx(i,{path:e.path,exact:e.exact,name:e.name,element:t.jsx(e.element,{})},s))),t.jsx(i,{path:"/",element:t.jsx(c,{to:"dashboard",replace:!0})})]})})}))),we=()=>{const s=e.useRef(),{colorMode:n,setColorMode:l}=j("coreui-free-react-admin-template-theme"),o=r(),i=a((e=>e.sidebarShow));return e.useEffect((()=>{document.addEventListener("scroll",(()=>{s.current&&s.current.classList.toggle("shadow-sm",document.documentElement.scrollTop>0)}))}),[]),t.jsxs(f,{position:"sticky",className:"mb-4 p-0",ref:s,children:[t.jsxs(u,{className:"border-bottom px-4",fluid:!0,children:[t.jsx(y,{onClick:()=>o({type:"set",sidebarShow:!i}),style:{marginInlineStart:"-14px"},children:t.jsx(b,{icon:g,size:"lg"})}),t.jsx(v,{className:"ms-auto",children:t.jsx(N,{children:t.jsx(w,{href:"#",children:t.jsx(b,{icon:_,size:"lg"})})})}),t.jsxs(v,{children:[t.jsxs(C,{variant:"nav-item",placement:"bottom-end",children:[t.jsx(k,{caret:!1,children:"dark"===n?t.jsx(b,{icon:S,size:"lg"}):"auto"===n?t.jsx(b,{icon:E,size:"lg"}):t.jsx(b,{icon:P,size:"lg"})}),t.jsxs(D,{children:[t.jsxs(R,{active:"light"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>l("light"),children:[t.jsx(b,{className:"me-2",icon:P,size:"lg"})," Light"]}),t.jsxs(R,{active:"dark"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>l("dark"),children:[t.jsx(b,{className:"me-2",icon:S,size:"lg"})," Dark"]}),t.jsxs(R,{active:"auto"===n,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>l("auto"),children:[t.jsx(b,{className:"me-2",icon:E,size:"lg"})," Auto"]})]})]}),t.jsx(N,{className:"d-block d-md-none",children:t.jsx(w,{href:"#",children:t.jsx(b,{icon:_,size:"lg"})})}),t.jsx(T,{className:"mx-2 d-none d-md-block",type:"search",placeholder:"Search","aria-label":"Search",size:"sm",style:{width:"300px"}})]})]}),t.jsx(u,{className:"px-4",fluid:!0,children:t.jsx(ve,{})})]})},_e=({items:e})=>{const s=(e,s,r,a=!1)=>t.jsxs(t.Fragment,{children:[s||a&&t.jsx("span",{className:"nav-icon",children:t.jsx("span",{className:"nav-icon-bullet"})}),e&&e,r&&t.jsx(L,{color:r.color,className:"ms-auto",size:"sm",children:r.text})]}),r=(e,r,a=!1)=>{const{component:n,name:l,badge:o,icon:i,...c}=e,m=n;return t.jsx(m,{as:"div",children:c.to||c.href?t.jsx(w,{...c.to&&{as:d},...c.href&&{target:"_blank",rel:"noopener noreferrer"},...c,children:s(l,i,o,a)}):s(l,i,o,a)},r)},a=(e,n)=>{const{component:l,name:o,icon:i,items:c,to:d,...m}=e,x=l;return t.jsx(x,{compact:!0,as:"div",toggler:s(o,i),...m,children:null==c?void 0:c.map(((e,s)=>e.items?a(e,s):r(e,s,!0)))},n)};return t.jsx(q,{as:ce,children:e&&e.map(((e,s)=>e.items?a(e,s):r(e,s)))})};_e.propTypes={items:ie.arrayOf(ie.any).isRequired};const Ce=[{component:N,name:"Dashboard",to:"/dashboard",icon:t.jsx(de,{icon:me,className:"me-2"})},{component:N,name:"Reports",to:"/reports",icon:t.jsx(de,{icon:me,className:"me-2"})},{component:N,name:"Users",to:"/users",icon:t.jsx(de,{icon:me,className:"me-2"})},{component:N,name:"Departments",to:"/departments",icon:t.jsx(de,{icon:me,className:"me-2"})},{component:N,name:"Products",to:"/products",icon:t.jsx(de,{icon:me,className:"me-2"})}],ke=s.memo((()=>{const e=m(),s=r(),n=a((e=>e.sidebarUnfoldable)),l=a((e=>e.sidebarShow));return t.jsxs(z,{className:"border-end",position:"fixed",unfoldable:n,visible:l,onVisibleChange:e=>{s({type:"set",sidebarShow:e})},children:[t.jsxs(V,{className:"border-bottom",children:[t.jsxs(I,{to:"/",children:[t.jsx(M,{src:"/images/careers_at_apptrade_cover.jpg",className:"sidebar-brand-full rounded",alt:"AppTrade Logo",width:220,height:80}),t.jsx(M,{src:"/favicon.png",className:"sidebar-brand-narrow",alt:"AppTrade Favicon",width:50,height:30})]}),t.jsx(F,{className:"d-lg-none",dark:!0,onClick:()=>s({type:"set",sidebarShow:!1})})]}),t.jsx(_e,{items:Ce}),t.jsxs(A,{className:"border-top d-none d-lg-flex",children:[t.jsx("span",{onClick:s=>e("/logout"),children:"Logout"}),t.jsx(O,{onClick:()=>s({type:"set",sidebarUnfoldable:!n})})]})]})}));ie.string;const Se=e=>{const{href:s,name:r,text:a,...n}=e,l=r?`https://coreui.io/react/docs/components/${r}`:s;return t.jsx("div",{className:"float-end",children:t.jsx(Q,{...n,href:l,rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:t.jsx("small",{className:"text-body-secondary",children:a||"docs"})})})};Se.propTypes={href:ie.string,name:ie.string,text:ie.string},s.memo(Se);const Ee=e=>{const{children:s,href:r,tabContentClassName:a}=e,n=`https://coreui.io/react/docs/${r}`;return t.jsxs("div",{className:"example",children:[t.jsxs(U,{variant:"underline-border",children:[t.jsx(N,{children:t.jsxs(w,{href:"#",active:!0,children:[t.jsx(b,{icon:$,className:"me-2"}),"Preview"]})}),t.jsx(N,{children:t.jsxs(w,{href:n,target:"_blank",children:[t.jsx(b,{icon:G,className:"me-2"}),"Code"]})})]}),t.jsx(H,{className:`rounded-bottom ${a||""}`,children:t.jsx(B,{className:"p-3 preview",visible:!0,children:s})})]})};Ee.propTypes={children:ie.node,href:ie.string,tabContentClassName:ie.string},s.memo(Ee);const Pe=()=>t.jsxs("div",{children:[t.jsx(ke,{}),t.jsxs("div",{className:"wrapper d-flex flex-column min-vh-100",children:[t.jsx(we,{}),t.jsx("div",{className:"body flex-grow-1",children:t.jsx(Ne,{})})]})]}),De=({data:e})=>{const{showDeleteModal:s,setShowDeleteModal:r,products:a,setProducts:n,selectedProduct:l,setSelectedProduct:o}=e;return t.jsx(t.Fragment,{children:t.jsxs(K,{visible:s,onClose:()=>r(!1),"aria-labelledby":"Confirm Delete?",children:[t.jsx(W,{children:t.jsx(J,{id:"LiveDemoExampleLabel",children:"Confirm Delete?"})}),t.jsxs(X,{children:["Woohoo, confirm to delete ",l.length," items?"]}),t.jsxs(Y,{children:[t.jsx(Z,{color:"secondary",onClick:()=>r(!1),children:"Close"}),t.jsx(Z,{color:"primary",onClick:()=>{if(0===l.length)return alert("Select a product");n((e=>e.filter((e=>!l.includes(e.id))))),o([]),r(!1)},children:"Save changes"})]})]})})};De.propTypes={data:ie.shape({showDeleteModal:ie.bool.isRequired,setShowDeleteModal:ie.func.isRequired,products:ie.array.isRequired,setProducts:ie.func.isRequired,selectedProduct:ie.array.isRequired,setSelectedProduct:ie.func.isRequired}).isRequired};const Re=({data:s})=>{var r;const{showQuantityModal:a,setShowQuantityModal:n,products:l,setProducts:o,selectedProduct:i,setSelectedProduct:c}=s,[d,m]=e.useState(null==(r=l.find((e=>i.includes(e.id))))?void 0:r.quantity);return t.jsx(t.Fragment,{children:t.jsxs(K,{visible:a,onClose:()=>n(!1),"aria-labelledby":"Quantity Input",children:[t.jsxs(X,{children:[t.jsx(T,{type:"number",id:"quantity",placeholder:"Enter quantity",value:d,min:1,max:999,onChange:e=>m(e.target.value)}),t.jsxs("div",{className:"numpad",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginTop:"15px"},children:[[1,2,3,4,5,6,7,8,9,0].map(((e,s)=>t.jsx(Z,{color:"primary",onClick:()=>m((s=>(s||"")+e)),style:{height:"50px"},children:e},e))),t.jsx(Z,{color:"danger",onClick:()=>m((e=>(null==e?void 0:e.slice(0,-1))||"")),style:{gridColumn:"span 3",width:"100%",height:"50px"},children:"Del"})]})]}),t.jsxs(Y,{children:[t.jsx(Z,{color:"secondary",onClick:()=>n(!1),children:"Close"}),t.jsx(Z,{color:"primary",onClick:()=>{o((e=>e.map((e=>i.includes(e.id)?{...e,quantity:d}:e)))),c([]),n(!1)},children:"Save changes"})]})]})})};Re.propTypes={data:ie.shape({showQuantityModal:ie.bool.isRequired,setShowQuantityModal:ie.func.isRequired,products:ie.array.isRequired,setProducts:ie.func.isRequired,selectedProduct:ie.array.isRequired,setSelectedProduct:ie.func.isRequired}).isRequired};const Te=()=>{const[s,r]=e.useState([]),[a,n]=e.useState([]),[l,o]=e.useState(""),[i,c]=e.useState(!1),[d,m]=e.useState(!1),[x,h]=e.useState(!1),[u,p]=e.useState(!1),j=s.reduce(((e,s)=>e+s.sale_price*s.quantity),0).toFixed(2),f=s.reduce(((e,s)=>e+(s.taxes?s.sale_price*s.taxes/100:0)*s.quantity),0).toFixed(2),y=(parseFloat(j)+parseFloat(f)).toFixed(2),b=e=>{"F1"===e.key&&e.preventDefault()};e.useEffect((()=>{const e=e=>{if(u)return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b),window.removeEventListener("beforeunload",e)}}),[u]);const g=e=>{const s=e.target.value.toLowerCase();axios.get(`/products/${s}`).then((e=>{var s;s=e.data[0],r((e=>e.find((e=>e.id===s.id))?e.map((e=>e.id===s.id?{...e,quantity:e.quantity+1}:e)):[...e,{...s,quantity:1}])),p(!0)})).catch((e=>{console.error("Error searching products:",e)}))};return t.jsxs("div",{className:"d-flex flex-column",style:{height:"100vh"},children:[t.jsx(De,{data:{showDeleteModal:i,setShowDeleteModal:c,products:s,setProducts:r,selectedProduct:a,setSelectedProduct:n}}),t.jsx(Re,{data:{showQuantityModal:d,setShowQuantityModal:m,products:s,setProducts:r,selectedProduct:a,setSelectedProduct:n}}),t.jsxs(ee,{className:"flex-grow-1 overflow-hidden",children:[t.jsxs(se,{className:"d-flex flex-column",children:[t.jsx(T,{className:"rounded-0 py-3 border-0 border-bottom",type:"search",placeholder:"Search product by name or barcode","aria-label":"Search",value:l,onChange:e=>{if(o(e.target.value),e.target.value.length>0){const s=(new Date).getTime();if(e.target.lastInputTime){const t=s-e.target.lastInputTime;e.target.lastInputTime=s,t<50&&(g(e),e.target.value="",o(""))}else e.target.lastInputTime=s}},onKeyDown:e=>{"Enter"===e.key&&(g(e),e.target.value="",o(""))}}),t.jsx("div",{className:"flex-grow-1 overflow-auto",children:t.jsxs(te,{hover:!0,responsive:!0,children:[t.jsx(re,{children:t.jsxs(ae,{children:[t.jsx(ne,{scope:"col",children:"Product"}),t.jsx(ne,{scope:"col",children:"Price"}),t.jsx(ne,{scope:"col",children:"Quantity"}),t.jsx(ne,{scope:"col",children:"Total"})]})}),0===s.length?t.jsx("div",{className:"text-center",children:t.jsx("h1",{children:"No items"})}):t.jsx(le,{children:s.map(((e,s)=>{const r=e.taxes?e.sale_price+e.sale_price*e.taxes/100:e.sale_price;return t.jsxs(ae,{active:a.includes(e.id),onClick:()=>(e=>{if(a.includes(e))return n(a.filter((s=>s!==e)));n([...a,e])})(e.id),children:[t.jsx(oe,{children:e.name}),t.jsx(oe,{children:r.toFixed(2)}),t.jsx(oe,{children:e.quantity}),t.jsx(oe,{children:(r*e.quantity).toFixed(2)})]},s)}))})]})}),t.jsxs("div",{className:"bg-body-secondary p-2 mt-auto",children:[t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Subtotal:"}),t.jsx("span",{children:j})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Tax:"}),t.jsx("span",{children:f})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("strong",{children:"Total:"}),t.jsx("strong",{children:y})]})]})]}),t.jsxs(se,{lg:5,xl:3,className:"d-flex flex-column bg-body-secondary rounded m-2",children:[t.jsxs("div",{className:"flex-grow-1",children:[t.jsxs("div",{className:" d-flex justify-content-between align-items-center mb-3 mt-2 text-center",children:[t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>{if(0===a.length)return pe.error("Select a product");c(!0)},style:{flex:1},children:[t.jsx(de,{icon:xe,className:"mb-2",style:{width:"50px",height:"50px"}}),"Delete"]}),t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>{if(0===a.length)return pe.error("Select a product");m(!0)},style:{flex:1},children:[t.jsx(de,{icon:he,className:"mb-2",style:{width:"50px",height:"50px"}}),"Quantity"]}),t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>{if(0===s.length)return pe.error("No products in cart");r([]),n([])},style:{flex:1},children:[t.jsx(de,{icon:ue,className:"mb-2",style:{width:"50px",height:"50px"}}),"New Sale"]})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Cash"),style:{flex:1},children:"Cash"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Credit Card"),style:{flex:1},children:"Credit Card"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Debit Card"),style:{flex:1},children:"Debit Card"})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Check"),style:{flex:1},children:"Check"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Gift Card"),style:{flex:1},children:"Gift Card"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Voucher"),style:{flex:1},children:"Voucher"})]})]}),t.jsx("div",{className:"bg-body-secondary p-2 mt-auto",children:t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Check"),style:{flex:1},children:"Lock"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Gift Card"),style:{flex:1},children:"Transfer"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Voucher"),style:{flex:1},children:"Void"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-secondary",onClick:()=>alert("Voucher"),style:{flex:1},children:"Menu"})]})})]})]})]})},qe=()=>t.jsx(Te,{}),Le=()=>{const[s,n]=e.useState("loading"),l=r(),o=a((e=>e.user)),i=m(),c=cookies.get("session_id");return e.useEffect((()=>{(()=>{if(o||c)return(async()=>{try{const e=await axios.post("/auth/verify-session",{session_id:c});l({type:"SET_USER",payload:e.data.user}),n("authenticated")}catch(e){cookies.remove("session_id"),i("/login")}})();i("/login")})()}),[i,l]),"loading"===s?t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:t.jsx("div",{className:"spinner-border",color:"primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):["super_admin","admin"].includes(o.role)?t.jsx(Pe,{}):t.jsx(qe,{})},ze=()=>t.jsx(Le,{});export{ze as default};
