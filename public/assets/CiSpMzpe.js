/**
 * Â© 2025 Melvin Jones Repol. All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/B6O3_fCj.js","assets/Cn32OB1o.js","assets/Dph47E3T.js","assets/DGxHXmgX.js","assets/uZNeay-J.js","assets/CFrBDmKk.js","assets/DEuonRil.js","assets/k-NSAY8B.js","assets/BS1w9-H_.js","assets/DKL8D26R.js","assets/CfN0c7gy.js","assets/DCKxNtYz.js","assets/DKQ8yKpg.js","assets/7qQU7VV1.js","assets/DQAZ9_KY.js","assets/0aPahKwr.js","assets/BTMzabsB.js","assets/B_UWSOuT.js","assets/B0L8PIxz.js","assets/Gf_rl4UC.js","assets/Df1MfkuZ.js","assets/BUTH-fPQ.js","assets/S7VqQqPc.js","assets/DhFz9pEk.js"])))=>i.map(i=>d[i]);
import{r as e,R as s,j as t}from"./Cn32OB1o.js";import{a as r,u as n}from"./Di1rf2ZC.js";import{_ as a}from"./D90fCqo7.js";import{u as o,R as i,a as d,N as l,b as c,c as m}from"./Df1MfkuZ.js";import{a as u,b as h,c as x,C as p,u as y,d as j,e as f,f as b,g,h as N,i as v,j as w,k,l as S,m as C,n as P,o as R,p as q,q as _,r as D,s as M,t as E,v as L,w as T,x as F,y as z,z as I,A as O,B as A,D as V,E as Q,F as W,G as $,H as U,I as H,J as G,K as J,L as B,M as K,N as X,O as Y,P as Z,Q as ee,R as se,S as te,T as re,U as ne,V as ae,W as oe,X as ie,Y as de}from"./DGxHXmgX.js";import{P as le}from"./uZNeay-J.js";import{S as ce}from"./8DNUdJ0c.js";import{F as me,f as ue,a as he,b as xe,c as pe,d as ye,e as je,g as fe}from"./Gf_rl4UC.js";import{y as be}from"./InIMjYBq.js";import"./Dph47E3T.js";import"./Dg4gVdE3.js";import"./DEuonRil.js";import"./k-NSAY8B.js";import"./uAQ2p3zS.js";import"./BPjVUy-D.js";import"./DqkGgfGl.js";import"./BXEMiIsG.js";import"./BeLtu-UY.js";import"./CFrBDmKk.js";import"./BS1w9-H_.js";import"./DKL8D26R.js";import"./BUTH-fPQ.js";import"./CIPVWkUN.js";import"./KuPr9E5P.js";const ge=e.lazy((()=>a((()=>import("./B6O3_fCj.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))),Ne=e.lazy((()=>a((()=>import("./7qQU7VV1.js")),__vite__mapDeps([13,1,2,10,4,11,12,3,5,6,7,8,9])))),ve=e.lazy((()=>a((()=>import("./DQAZ9_KY.js")),__vite__mapDeps([14,1,2,10,4,11,12,3,5,6,7,8,9])))),we=e.lazy((()=>a((()=>import("./0aPahKwr.js")),__vite__mapDeps([15,1,2,10,4,11,12,3,5,6,7,8,9])))),ke=[{path:"/",exact:!0,name:"Home"},{path:"/dashboard",name:"Dashboard",element:ge},{path:"/reports",name:"Reports",element:e.lazy((()=>a((()=>import("./BTMzabsB.js")),__vite__mapDeps([16,1,2,10,4,11,12]))))},{path:"/departments",name:"Departments",element:e.lazy((()=>a((()=>import("./B_UWSOuT.js")),__vite__mapDeps([17,1,2,10,4,11,12,14,3,5,6,7,8,9]))))},{path:"/products",name:"Products",element:e.lazy((()=>a((()=>import("./B0L8PIxz.js")),__vite__mapDeps([18,1,2,10,4,11,12,13,3,5,6,7,8,9,19,20,21]))))},{path:"/users",name:"Users",element:e.lazy((()=>a((()=>import("./S7VqQqPc.js")),__vite__mapDeps([22,1,2,10,4,11,12,15,3,5,6,7,8,9]))))},{path:"/new-product",name:"New Product",element:Ne},{path:"/new-department",name:"New Department",element:ve},{path:"/new-user",name:"New User",element:we},{path:"/logout",name:"Logout",element:e.lazy((()=>a((()=>import("./DhFz9pEk.js")),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9]))))}],Se=s.memo((()=>{const s=o().pathname,r=(e=>{const s=[];return e.split("/").reduce(((e,t,r,n)=>{const a=`${e}/${t}`,o=((e,s)=>{const t=s.find((s=>s.path===e));return!!t&&t.name})(a,ke);return o&&s.push({pathname:a,name:o,active:r+1===n.length}),a})),s})(s);return t.jsxs(u,{className:"my-0",children:[t.jsx(h,{href:"/",children:"Home"}),r.map(((s,t)=>e.createElement(h,{...s.active?{active:!0}:{href:s.pathname},key:t},s.name)))]})})),Ce=s.memo((()=>t.jsx(x,{fluid:!0,className:"px-4",children:t.jsx(e.Suspense,{fallback:t.jsx(p,{color:"primary"}),children:t.jsxs(i,{children:[ke.map(((e,s)=>e.element&&t.jsx(d,{path:e.path,exact:e.exact,name:e.name,element:t.jsx(e.element,{})},s))),t.jsx(d,{path:"/",element:t.jsx(l,{to:"dashboard",replace:!0})})]})})}))),Pe=()=>{const s=e.useRef(),{colorMode:a,setColorMode:o}=y("coreui-free-react-admin-template-theme"),i=r(),d=n((e=>e.sidebarShow));return e.useEffect((()=>{document.addEventListener("scroll",(()=>{s.current&&s.current.classList.toggle("shadow-sm",document.documentElement.scrollTop>0)}))}),[]),t.jsxs(j,{position:"sticky",className:"mb-4 p-0",ref:s,children:[t.jsxs(x,{className:"border-bottom px-4",fluid:!0,children:[t.jsx(f,{onClick:()=>i({type:"set",sidebarShow:!d}),style:{marginInlineStart:"-14px"},children:t.jsx(b,{icon:g,size:"lg"})}),t.jsx(N,{className:"ms-auto",children:t.jsx(v,{children:t.jsx(w,{href:"#",children:t.jsx(b,{icon:k,size:"lg"})})})}),t.jsxs(N,{children:[t.jsxs(S,{variant:"nav-item",placement:"bottom-end",children:[t.jsx(C,{caret:!1,children:"dark"===a?t.jsx(b,{icon:P,size:"lg"}):"auto"===a?t.jsx(b,{icon:R,size:"lg"}):t.jsx(b,{icon:q,size:"lg"})}),t.jsxs(_,{children:[t.jsxs(D,{active:"light"===a,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>o("light"),children:[t.jsx(b,{className:"me-2",icon:q,size:"lg"})," Light"]}),t.jsxs(D,{active:"dark"===a,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>o("dark"),children:[t.jsx(b,{className:"me-2",icon:P,size:"lg"})," Dark"]}),t.jsxs(D,{active:"auto"===a,className:"d-flex align-items-center",as:"button",type:"button",onClick:()=>o("auto"),children:[t.jsx(b,{className:"me-2",icon:R,size:"lg"})," Auto"]})]})]}),t.jsx(v,{className:"d-block d-md-none",children:t.jsx(w,{href:"#",children:t.jsx(b,{icon:k,size:"lg"})})}),t.jsx(M,{className:"mx-2 d-none d-md-block",type:"search",placeholder:"Search","aria-label":"Search",size:"sm",style:{width:"300px"}})]})]}),t.jsx(x,{className:"px-4",fluid:!0,children:t.jsx(Se,{})})]})},Re=({items:e})=>{const s=(e,s,r,n=!1)=>t.jsxs(t.Fragment,{children:[s||n&&t.jsx("span",{className:"nav-icon",children:t.jsx("span",{className:"nav-icon-bullet"})}),e&&e,r&&t.jsx(L,{color:r.color,className:"ms-auto",size:"sm",children:r.text})]}),r=(e,r,n=!1)=>{const{component:a,name:o,badge:i,icon:d,...l}=e,m=a;return t.jsx(m,{as:"div",children:l.to||l.href?t.jsx(w,{...l.to&&{as:c},...l.href&&{target:"_blank",rel:"noopener noreferrer"},...l,children:s(o,d,i,n)}):s(o,d,i,n)},r)},n=(e,a)=>{const{component:o,name:i,icon:d,items:l,to:c,...m}=e,u=o;return t.jsx(u,{compact:!0,as:"div",toggler:s(i,d),...m,children:null==l?void 0:l.map(((e,s)=>e.items?n(e,s):r(e,s,!0)))},a)};return t.jsx(E,{as:ce,children:e&&e.map(((e,s)=>e.items?n(e,s):r(e,s)))})};Re.propTypes={items:le.arrayOf(le.any).isRequired};const qe=[{component:v,name:"Dashboard",to:"/dashboard",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Reports",to:"/reports",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Users",to:"/users",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Departments",to:"/departments",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Products",to:"/products",icon:t.jsx(me,{icon:ue,className:"me-2"})}],_e=[{component:v,name:"Dashboard",to:"/dashboard",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Reports",to:"/reports",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Users",to:"/users",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Departments",to:"/departments",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Products",to:"/products",icon:t.jsx(me,{icon:ue,className:"me-2"})}],De=[{component:v,name:"Management",to:"/management",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Sales history",to:"/sales-history",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Open Sales",to:"/open-sales",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Cash in/out",to:"/cash-in-out",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"Credit Payments",to:"/credit-payments",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"End of Day",to:"/end-of-day",icon:t.jsx(me,{icon:ue,className:"me-2"})},{component:v,name:"User info",to:"/user-info",icon:t.jsx(me,{icon:ue,className:"me-2"})}],Me=s.memo((()=>{const e=m(),s=r(),a=n((e=>e.sidebarUnfoldable)),o=n((e=>e.sidebarShow)),i=n((e=>e.user));return t.jsxs(T,{className:"border-end",position:"fixed",unfoldable:a,visible:o,onVisibleChange:e=>{s({type:"set",sidebarShow:e})},children:[t.jsxs(F,{className:"border-bottom",children:[t.jsxs(z,{to:"/",children:[t.jsx(I,{src:"/images/careers_at_apptrade_cover.jpg",className:"sidebar-brand-full rounded",alt:"AppTrade Logo",width:220,height:80}),t.jsx(I,{src:"/favicon.png",className:"sidebar-brand-narrow",alt:"AppTrade Favicon",width:50,height:30})]}),t.jsx(O,{className:"d-lg-none",dark:!0,onClick:()=>s({type:"set",sidebarShow:!1})})]}),t.jsx(Re,{items:"super_admin"===i.role||"admin"===i.role?_e:"cashier"===i.role?De:qe}),t.jsxs(A,{className:"border-top d-none d-lg-flex",children:[t.jsx("span",{onClick:s=>e("/logout"),children:"Logout"}),t.jsx(V,{onClick:()=>s({type:"set",sidebarUnfoldable:!a})})]})]})}));le.string;const Ee=e=>{const{href:s,name:r,text:n,...a}=e,o=r?`https://coreui.io/react/docs/components/${r}`:s;return t.jsx("div",{className:"float-end",children:t.jsx(Q,{...a,href:o,rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:t.jsx("small",{className:"text-body-secondary",children:n||"docs"})})})};Ee.propTypes={href:le.string,name:le.string,text:le.string},s.memo(Ee);const Le=e=>{const{children:s,href:r,tabContentClassName:n}=e,a=`https://coreui.io/react/docs/${r}`;return t.jsxs("div",{className:"example",children:[t.jsxs(W,{variant:"underline-border",children:[t.jsx(v,{children:t.jsxs(w,{href:"#",active:!0,children:[t.jsx(b,{icon:$,className:"me-2"}),"Preview"]})}),t.jsx(v,{children:t.jsxs(w,{href:a,target:"_blank",children:[t.jsx(b,{icon:U,className:"me-2"}),"Code"]})})]}),t.jsx(H,{className:`rounded-bottom ${n||""}`,children:t.jsx(G,{className:"p-3 preview",visible:!0,children:s})})]})};Le.propTypes={children:le.node,href:le.string,tabContentClassName:le.string},s.memo(Le);const Te=()=>t.jsxs("div",{children:[t.jsx(Me,{}),t.jsxs("div",{className:"wrapper d-flex flex-column min-vh-100",children:[t.jsx(Pe,{}),t.jsx("div",{className:"body flex-grow-1",children:t.jsx(Ce,{})})]})]}),Fe=({data:e})=>{const{showDeleteModal:s,setShowDeleteModal:r,products:n,setProducts:a,selectedProduct:o,setSelectedProduct:i,deleteMode:d}=e;return t.jsx(t.Fragment,{children:t.jsxs(J,{visible:s,onClose:()=>r(!1),"aria-labelledby":"Confirm Delete?",children:[t.jsx(B,{children:t.jsx(K,{id:"LiveDemoExampleLabel",children:"Confirm Delete?"})}),t.jsxs(X,{children:["Woohoo, confirm to delete ",o.length," items?"]}),t.jsx(Y,{children:t.jsx(Z,{color:"primary",onClick:()=>{if(0===o.length)return alert("Select a product");a("void"===d?e=>e.filter((e=>!o.includes(e.id))):e=>e.map((e=>o.includes(e.id)?{...e,deleted:!0}:e))),i([]),r(!1)},children:"Save changes"})})]})})};Fe.propTypes={data:le.shape({showDeleteModal:le.bool.isRequired,setShowDeleteModal:le.func.isRequired,products:le.array.isRequired,setProducts:le.func.isRequired,selectedProduct:le.array.isRequired,setSelectedProduct:le.func.isRequired,deleteMode:le.string.isRequired}).isRequired};const ze=({data:s})=>{var r;const{showQuantityModal:n,setShowQuantityModal:a,products:o,setProducts:i,selectedProduct:d,setSelectedProduct:l}=s,c=e.useRef(null),[m,u]=e.useState(null==(r=o.find((e=>d.includes(e.id))))?void 0:r.quantity);return e.useEffect((()=>{}),[]),t.jsx(t.Fragment,{children:t.jsx(J,{visible:n,onClose:()=>{u(0),a(!1)},"aria-labelledby":"Quantity Input",children:t.jsxs(X,{children:[t.jsx(M,{type:"number",id:"quantity",placeholder:"Enter quantity",value:m,min:1,max:999,onChange:e=>u(e.target.value),ref:c}),t.jsxs("div",{className:"numpad",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginTop:"15px"},children:[[1,2,3,4,5,6,7,8,9].map(((e,s)=>t.jsx(Z,{color:"primary",onClick:()=>u((s=>(s||"")+e)),style:{height:"50px"},children:e},e))),t.jsx(Z,{color:"outline-danger",onClick:()=>u(""),style:{height:"50px"},children:"C"}),t.jsx(Z,{color:"outline-primary",onClick:()=>u((e=>parseInt(e+"0"))),style:{height:"50px"},children:"0"}),t.jsx(Z,{color:"outline-danger",onClick:()=>u((e=>e&&e.toString().slice(0,-1)||"")),style:{height:"50px"},children:t.jsx(me,{icon:he})})]}),t.jsx("div",{className:"d-flex justify-content-end mt-3 gap-2",children:t.jsx(Z,{color:"primary",onClick:()=>{i((e=>e.map((e=>d.includes(e.id)?{...e,quantity:m}:e)))),l([]),a(!1)},children:"Save changes"})})]})})})};ze.propTypes={data:le.shape({showQuantityModal:le.bool.isRequired,setShowQuantityModal:le.func.isRequired,products:le.array.isRequired,setProducts:le.func.isRequired,selectedProduct:le.array.isRequired,setSelectedProduct:le.func.isRequired}).isRequired};const Ie=({data:s})=>{var r;const{showDiscountModal:n,setShowDiscountModal:a,products:o,setProducts:i,selectedProduct:d,setSelectedProduct:l}=s,[c,m]=e.useState((null==(r=o.find((e=>d.includes(e.id))))?void 0:r.discount)||""),u=()=>c<0?be.error("Discount cannot be negative"):c>100?be.error("Discount cannot be more than 100%"):(d.length>0?i((e=>e.map((e=>d.includes(e.id)?{...e,discount:c}:e)))):i((e=>-1!==e.findIndex((e=>"discount"===e.id))?e.map((e=>"discount"===e.id?{...e,discount:Number(c),date:Date.now()}:e)):[...e,{id:"discount",date:Date.now(),discount:Number(c)}])),l([]),void a(!1)),h=e=>{"Enter"===e.key&&u()};return e.useEffect((()=>(window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)})),[]),t.jsx(t.Fragment,{children:t.jsx(J,{visible:n,onClose:()=>{m(0),a(!1)},"aria-labelledby":"Discount Input",children:t.jsxs(X,{children:[t.jsx(M,{type:"number",id:"discount",placeholder:"Enter discount",value:c,onChange:e=>m(e.target.value)}),t.jsxs("div",{className:"numpad",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginTop:"15px"},children:[t.jsx(Z,{color:"primary",onClick:()=>m(20),style:{height:"50px"},children:"Senior"}),t.jsx(Z,{color:"primary",onClick:()=>m(20),style:{height:"50px"},children:"PWD"}),t.jsx(Z,{color:"primary",onClick:()=>m(30),style:{height:"50px"},children:"Employee"}),[1,2,3,4,5,6,7,8,9].map(((e,s)=>t.jsx(Z,{color:"outline-primary",onClick:()=>m((s=>parseInt(s+""+e))),style:{height:"50px"},children:e},e))),t.jsx(Z,{color:"outline-danger",onClick:()=>m(""),style:{height:"50px"},children:"C"}),t.jsx(Z,{color:"outline-primary",onClick:()=>m((e=>parseInt(e+"0"))),style:{height:"50px"},children:"0"}),t.jsx(Z,{color:"outline-danger",onClick:()=>m((e=>e&&e.toString().slice(0,-1)||"")),style:{height:"50px"},children:t.jsx(me,{icon:he})})]}),t.jsx("div",{className:"d-flex justify-content-end mt-3 gap-2",children:t.jsx(Z,{color:"primary",onClick:u,children:"Save changes"})})]})})})};Ie.propTypes={data:le.shape({showDiscountModal:le.bool.isRequired,setShowDiscountModal:le.func.isRequired,products:le.array.isRequired,setProducts:le.func.isRequired,selectedProduct:le.array.isRequired,setSelectedProduct:le.func.isRequired}).isRequired};const Oe=({data:s})=>{const{showPaymentModal:r,setShowPaymentModal:n,products:a,setProducts:o,selectedProduct:i,setSelectedProduct:d,total:l,paymentMethod:c,setPaymentMethod:m}=s,[u,h]=e.useState(a.amount||""),x=()=>{if(u<0)return be.error("Amount cannot be negative")},p=e=>{"Enter"===e.key&&x()};return e.useEffect((()=>(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)})),[]),t.jsx(t.Fragment,{children:t.jsx(J,{alignment:"center",scrollable:!0,visible:r,onClose:()=>{h(""),n(!1)},"aria-labelledby":"Payment",children:t.jsxs(X,{children:[t.jsx("h5",{children:"Payment"}),t.jsxs("div",{className:"d-flex flex-row justify-content-between gap-2 mb-3",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("cash"===c?"bg-primary border-primary":"border-secondary"),onClick:()=>m("cash"),style:{cursor:"pointer"},children:"Cash"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("credit"===c?"bg-primary border-primary":"border-secondary"),onClick:()=>m("credit"),style:{cursor:"pointer"},children:"Credit"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("debit"===c?"bg-primary border-primary":"border-secondary"),onClick:()=>m("debit"),style:{cursor:"pointer"},children:"Debit"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 flex-fill "+("check"===c?"bg-primary border-primary":"border-secondary"),onClick:()=>m("check"),style:{cursor:"pointer"},children:"Check"})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("p",{children:"Total:"}),t.jsx("div",{className:"text-wrap text-break overflow-y",children:l})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("p",{className:"my-auto",children:"Paid:"}),t.jsx(M,{type:"number",value:u,onChange:e=>h(e.target.value),placeholder:"Enter amount",min:0,className:"w-50"})]}),t.jsx("hr",{}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("p",{className:"me-3",children:"Change:"}),t.jsx("div",{className:"text-wrap text-break overflow-y",children:(()=>{const e=parseFloat(u),s=parseFloat(l);return e>=s?t.jsx(t.Fragment,{children:(e-s).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}):"0.00"})()})]}),t.jsx("div",{className:"d-flex justify-content-end mt-3 gap-2",children:t.jsx(Z,{color:"primary",onClick:x,disabled:!u||parseInt(u)<parseInt(l),children:"Print Receipt"})})]})})})};Oe.propTypes={data:le.shape({showPaymentModal:le.bool.isRequired,setShowPaymentModal:le.func.isRequired,products:le.array.isRequired,setProducts:le.func.isRequired,selectedProduct:le.array.isRequired,setSelectedProduct:le.func.isRequired,total:le.number.isRequired,paymentMethod:le.string.isRequired,setPaymentMethod:le.func.isRequired}).isRequired};const Ae=({data:e})=>{const{handleDelete:s,handleQuantity:r,handleNewSale:n,handleDiscount:a,handleSalesLock:o,handlePayment:i,salesLock:d,selectedProduct:l,showMenu:c,setShowMenu:m,discount:u,paymentMethod:h,setPaymentMethod:x}=e;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-grow-1 text-uppercase","data-aos":"fade-in",children:[t.jsxs("div",{className:" d-flex justify-content-between align-items-center mt-2 text-center",children:[t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-2 "+(l.length>0?"bg-danger border-danger":"border-secondary"),onClick:e=>s("del"),style:{flex:1},children:[t.jsx(me,{icon:xe,className:"mb-2",style:{width:"30px",height:"50px"}}),"Delete"]}),t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:r,style:{flex:1},children:[t.jsx(me,{icon:pe,className:"mb-2",style:{width:"30px",height:"50px"}}),"Quantity"]}),t.jsxs("div",{className:"rounded py-5 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:n,style:{flex:1},children:[t.jsx(me,{icon:ye,className:"mb-2",style:{width:"30px",height:"50px"}}),"New Sale"]})]}),t.jsx("small",{className:"ms-1",children:"Payments"}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+("cash"===h?"bg-primary border-primary":"border-secondary"),onClick:()=>x("cash"),style:{flex:1},children:"Cash"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+("credit"===h?"bg-primary border-primary":"border-secondary"),onClick:()=>x("credit"),style:{flex:1},children:"Credit Card"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+("debit"===h?"bg-primary border-primary":"border-secondary"),onClick:()=>x("debit"),style:{flex:1},children:"Debit Card"})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+("check"===h?"bg-primary border-primary":"border-secondary"),onClick:()=>x("check"),style:{flex:1},children:"Check"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:()=>alert("Gift Card"),style:{flex:1},children:"Gift Card"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:()=>alert("Voucher"),style:{flex:1},children:"Voucher"})]})]}),t.jsxs("div",{className:"mt-auto text-uppercase","data-aos":"fade-in",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+(u>0?"bg-primary border-primary":"border-secondary"),onClick:a,style:{flex:1},children:"Discount"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:()=>alert("Gift Card"),style:{flex:1},children:"Refund"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-success bg-success",onClick:i,style:{flex:1},children:"Payment"})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 text-center",children:[t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 "+(d?"bg-danger border-danger":"border-secondary"),onClick:o,style:{flex:1},children:"Lock"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:()=>alert("Gift Card"),style:{flex:1},children:"Transfer"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-danger bg-danger",onClick:e=>s("void"),style:{flex:1},children:"Void"}),t.jsx("div",{className:"rounded py-3 m-1 d-flex flex-column align-items-center border border-2 border-secondary",onClick:()=>m(!c),style:{flex:1},children:"Menu"})]})]})]})};Ae.propTypes={data:le.shape({handleDelete:le.func.isRequired,handleQuantity:le.func.isRequired,handleNewSale:le.func.isRequired,handleDiscount:le.func.isRequired,handleSalesLock:le.func.isRequired,handlePayment:le.func.isRequired,salesLock:le.bool.isRequired,selectedProduct:le.array.isRequired,showMenu:le.bool.isRequired,setShowMenu:le.func.isRequired,discount:le.string.isRequired,paymentMethod:le.string.isRequired,setPaymentMethod:le.func.isRequired}).isRequired};const Ve=({data:s})=>{const{showMenu:r,setShowMenu:n}=s,a=[{name:"Management",path:"/management",icon:ye},{name:"Sales History",path:"/sales-history",icon:ye},{name:"Open Sales",path:"/open-sales",icon:ye},{name:"Cash In/Out",path:"/cash-in-out",icon:ye},{name:"Credit Payments",path:"/credit-payments",icon:ye},{name:"End of Day",path:"/end-of-day",icon:ye},{name:"User Info",path:"/user-info",icon:ye}];return e.useEffect((()=>{const e=e=>{console.log(e.key),"Escape"===e.key&&n(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]),t.jsxs("div",{className:"m-2","data-aos":"fade-in",children:[t.jsx("div",{className:"d-flex justify-content-between align-items-center",style:{cursor:"pointer"},onClick:()=>n(!1),children:t.jsxs("div",{className:"text-center py-3",onClick:()=>n(!1),children:[t.jsx(me,{icon:je,className:"my-auto me-3"}),t.jsx("span",{className:"text-uppercase",children:"Menu"})]})}),t.jsx(ee,{children:a.map(((e,s)=>t.jsx(v,{children:t.jsx(w,{children:t.jsxs("span",{className:"border p-3 rounded",style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(me,{icon:e.icon,className:"my-auto"}),t.jsx("span",{children:e.name})]})})},s)))})]})};Ve.propTypes={data:le.shape({showMenu:le.bool.isRequired,setShowMenu:le.func.isRequired}).isRequired};const Qe=()=>{const[s,r]=e.useState([]),[n,a]=e.useState([]),[o,i]=e.useState(null),[d,l]=e.useState(""),[c,m]=e.useState(!1),[u,h]=e.useState(!1),[x,y]=e.useState(!1),[j,f]=e.useState(!1),[b,g]=e.useState(!1),[N,v]=e.useState("cash"),[w,k]=e.useState(!1),[S,C]=e.useState(!1),[P,R]=e.useState(null),q=s.filter((e=>"discount"!==e.id&&!e.deleted)).reduce(((e,s)=>e+s.sale_price*(1-s.discount/100)*s.quantity),0).toFixed(2),_=s.filter((e=>"discount"!==e.id&&!e.deleted)).reduce(((e,s)=>{const t=s.sale_price*(1-s.discount/100);return e+(s.taxes?t*s.taxes/100:0)*s.quantity}),0).toFixed(2),D=s.filter((e=>"discount"===e.id)).reduce(((e,s)=>e+(s.discount||0)),0),E=((parseFloat(q)+parseFloat(_))*(1-parseFloat(D)/100)).toFixed(2),L=(e,s,t=0)=>(e*(1-t/100)*s).toFixed(2),T=(e,s=0)=>(e*(1-s/100)).toFixed(2),F=e=>{"F2"===e.key?(e.preventDefault(),O()):"F4"===e.key?(e.preventDefault(),I()):"F10"===e.key?(e.preventDefault(),V()):"Delete"===e.key&&(e.preventDefault(),A())};e.useEffect((()=>{const e=e=>{if(S)return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),window.addEventListener("keydown",F),()=>{window.removeEventListener("keydown",F),window.removeEventListener("beforeunload",e)}}),[S]),e.useEffect((()=>{(async()=>{axios.get("/sales-lock").then((e=>{e.data.length>0?(i(!0),r(JSON.parse(e.data))):i(!1)})).catch((e=>{console.error("Error fetching sales lock:",e)}))})()}),[]);const z=e=>{if(o)return be.error("Sales locked");const s=e.target.value.toLowerCase();axios.get(`/products/${s}`).then((e=>{if(0===e.data.length)return be.error("Product not found");var s;s=e.data[0],r((e=>e.find((e=>e.id===s.id))?e.map((e=>e.id===s.id?{...e,quantity:e.quantity+1,discount:0}:e)):[...e,{...s,quantity:1,discount:0}])),C(!0)})).catch((e=>{console.error("Error searching products:",e)}))},I=()=>o?be.error("Sales locked"):0===n.length?be.error("Select a product"):void h(!0),O=()=>{if(o)return be.error("Sales locked");y(!0)},A=e=>o?be.error("Sales locked"):0===n.length?be.error("Select a product"):(m(!0),void R(e)),V=()=>o?be.error("Sales locked"):0===s.length?be.error("No products in cart"):void g(!0);return null===o?t.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:t.jsx(p,{color:"primary"})}):t.jsxs("div",{className:"d-flex flex-column",style:{height:"100vh",width:"99.3%",userSelect:"none"},children:[t.jsx(Fe,{data:{showDeleteModal:c,setShowDeleteModal:m,products:s,setProducts:r,selectedProduct:n,setSelectedProduct:a,deleteMode:P}}),t.jsx(ze,{data:{showQuantityModal:u,setShowQuantityModal:h,products:s,setProducts:r,selectedProduct:n,setSelectedProduct:a}}),t.jsx(Ie,{data:{showDiscountModal:x,setShowDiscountModal:y,products:s,setProducts:r,selectedProduct:n,setSelectedProduct:a}}),t.jsx(Oe,{data:{showPaymentModal:b,setShowPaymentModal:g,products:s,setProducts:r,selectedProduct:n,setSelectedProduct:a,total:E,paymentMethod:N,setPaymentMethod:v}}),t.jsxs(se,{className:"flex-grow-1 overflow-hidden",children:[t.jsxs(te,{className:"d-flex flex-column",children:[t.jsx(M,{className:"rounded-0 py-3 border-0 border-bottom",type:"search",placeholder:"Search product by name or barcode","aria-label":"Search",value:d,onChange:e=>{l(e.target.value)},autoFocus:!0,onFocus:e=>{e.target.select(),e.target.setSelectionRange(0,e.target.value.length)},onKeyDown:e=>{"Enter"===e.key&&(z(e),e.target.value="",l(""))}}),t.jsx("div",{className:"flex-grow-1 overflow-auto",children:t.jsxs(re,{hover:!0,responsive:!0,children:[t.jsx(ne,{children:t.jsxs(ae,{children:[t.jsx(oe,{scope:"col",className:"text-uppercase",style:{minWidth:180},children:"Product"}),t.jsx(oe,{scope:"col",className:"text-uppercase text-center",style:{width:80,maxWidth:100},children:"Quantity"}),t.jsx(oe,{scope:"col",className:"text-uppercase text-end",style:{width:100,maxWidth:120},children:"Price"}),t.jsx(oe,{scope:"col",className:"text-uppercase text-end",style:{width:110,maxWidth:130},children:"Total"})]})}),0===s.length?t.jsx("div",{className:"position-absolute top-50 start-50 translate-middle text-center",children:t.jsx("h3",{className:"text-muted mb-0",children:"No items in cart"})}):t.jsx(ie,{children:s.map(((e,s)=>{const r=e.taxes?e.sale_price+e.sale_price*e.taxes/100:e.sale_price;if("discount"!==e.id)return t.jsxs(ae,{active:n.includes(e.id),onClick:()=>(e=>{if(n.includes(e))return a(n.filter((s=>s!==e)));a([...n,e])})(e.id),children:[t.jsxs(de,{style:{minWidth:180},children:[t.jsx("span",{className:`${e.deleted&&"text-danger"}`,children:e.name}),t.jsx("span",{className:`${e.deleted&&"text-danger"} d-block`,style:{fontSize:"0.7em"},children:e.barcode})]}),t.jsx(de,{className:`${e.deleted&&"text-danger"} text-end`,style:{width:80,maxWidth:100},children:e.quantity}),t.jsxs(de,{className:`${e.deleted&&"text-danger"} text-end`,style:{width:100,maxWidth:120},children:[e.discount>0&&t.jsx(me,{icon:fe,className:(e.deleted?"text-danger":"text-success")+" me-1",style:{width:"12px",height:"12px"}}),T(r,e.discount)]}),t.jsx(de,{className:`${e.deleted&&"text-danger"} text-end`,style:{width:110,maxWidth:130},children:L(r,e.quantity,e.discount)})]},s)}))})]})}),t.jsxs("div",{className:"bg-body-secondary p-3 m-3 rounded mt-auto",children:[t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Subtotal:"}),t.jsx("span",{children:q})]}),D>0&&t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("span",{children:"Discount:"}),t.jsxs("span",{children:[D,"%"]})]}),t.jsxs("div",{className:"d-flex justify-content-between  border-bottom border-secondary pb-2",children:[t.jsx("span",{children:"Tax:"}),t.jsx("span",{children:_})]}),t.jsxs("div",{className:"d-flex justify-content-between pt-2",children:[t.jsx("strong",{children:"Total:"}),t.jsx("strong",{children:E})]})]})]}),t.jsx(te,{lg:5,xl:3,className:"d-flex flex-column border-start border-2 border-secondary",children:w?t.jsx(Ve,{data:{showMenu:w,setShowMenu:k}}):t.jsx(Ae,{data:{handleDelete:A,handleQuantity:I,handleNewSale:()=>{if(0===s.length)return be.error("No products in cart");r([]),a([])},handleDiscount:O,handleSalesLock:async()=>{if(0===s.length)return be.error("No products in cart");axios.post("/sales-lock",{products:o?"[]":JSON.stringify(s),mode:!o}).then((e=>{be.success(o?"Sales unlocked successfully":"Sales locked successfully"),i(!o)})).catch((e=>{console.error("Error fetching sales lock:",e)}))},handlePayment:V,salesLock:o,selectedProduct:n,showMenu:w,setShowMenu:k,discount:D,paymentMethod:N,setPaymentMethod:v}})})]})]})},We=()=>t.jsx(Qe,{}),$e=()=>{const[s,a]=e.useState("loading"),o=r(),i=n((e=>e.user)),d=m(),l=cookies.get("session_id");return e.useEffect((()=>{(()=>{if(i||l)return(async()=>{try{const e=await axios.post("/auth/verify-session",{session_id:l});o({type:"SET_USER",payload:e.data.user}),a("authenticated")}catch(e){cookies.remove("session_id"),d("/login")}})();d("/login")})()}),[d,o]),"loading"===s?t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:t.jsx("div",{className:"spinner-border",color:"primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):["super_admin","admin"].includes(i.role)?t.jsx(Te,{}):"cashier"===i.role?t.jsx(We,{}):t.jsx(t.Fragment,{children:"Hello world"})},Ue=()=>t.jsx($e,{});export{Ue as default};
